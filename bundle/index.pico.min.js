"use strict";function t(){throw Error()}function e(){this._listeners={}}function n(t){t&&("#"+t in this?this._listeners[t]=this["#"+t]:delete this._listeners[t])}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this,{_buffer:[],length:0},t)}function i(t){return t.currentPattern=null,t.arrayOffset=t.patternIndex=t.byteIndex=t.index=0,t.active=!1,t}function o(){--this._busState.active||this.emit("inactive")}function u(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.transport=e.transport,this.type=e.type,this._setup=e.setup.bind(this),this._read=function(n){return e.read.call(t,void 0===n?n:t.options.highWaterMark)},this._write=e.write.bind(this),this.options={highWaterMark:e.highWaterMark||_},this._busState=new r({watching:[],active:0,nodeIndex:0,configured:!1,ticker:!1})}if("function"!=typeof console.time){var s={};console.time=function(t){s[t]=Date.now()},console.timeEnd=function(t){t in s&&(console.log(t+": "+(Date.now()-s[t]).toFixed(3)+"ms"),delete s[t])}}"function"!=typeof console.error&&(console.error=console.log),Object.assign=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i in n){var o=n[i];if(o instanceof Object)for(var u in o)t[u]=o[u]}return t};var a=Object.defineProperty;Object.defineProperty=function(t,e,n){try{return a(t,e,n)}catch(r){return desc.get?t.value=n.get():desc.value&&(t[e]=n.value),t}},Object.defineProperties=function(t,e){for(var n in e){var r=e[n];Object.defineProperty(t,n,r)}return t};var h="_super",c="_apply",f="_isExtended",l=function(t,e,n,r){t.prototype[n]||Object.defineProperty(t.prototype,n,{value:[]}),e.forEach(function(e){var i=!!e.prototype[f],o=!!e.prototype[n],u=t.prototype[n].some(function(t){return t===e}),s=!(i&&r||u);i&&o&&e.prototype[n].forEach(function(e){t.prototype[n].some(function(t){return t===e})||t.prototype[n].push(e)}),s&&t.prototype[n].push(e)})};[].concat=function(){var t=[];for(var e in this)t.push(this[e]);for(var n in arguments)for(var r in arguments[n])t.push(arguments[n][r]);return t},Promise.race=function(t){if(!(t instanceof Array))throw new TypeError("You must pass an array to Promise.race().");return new this(function(e,n){for(var r,i=0;i<t.length;i++)(r=t[i])&&"function"==typeof r.then?r.then(e,n):e(r)})};var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.from=function(t,e,n){if("string"==typeof t){var r=[];for(var i in t)r[i]=t.charCodeAt(i);return new Uint8Array(r)}if(t instanceof ArrayBuffer)return new Uint8Array(t.slice(void 0!==e?e:0,e+(void 0!==n?n:t.length)));if(t instanceof Array||t instanceof Uint8Array)return new Uint8Array(t);throw new TypeError("Cannot create buffer from",void 0===t?"undefined":d(t))},t.concat=function(e,n){var r=e||[],i=void 0!==n?n:r.reduce(function(t,e){return t+e.length},0),o=t.from([],0,i);return r.reduce(function(t,e){return o.set(e,t),t+e.length},0),o};var p=[{queue:[],immediatePush:!0,tick:!1},{queue:[],immediatePush:!1,tick:!1}],v=!1,y=function(){for(var t in p){if(p[t].queue.length)if(p[t].immediatePush){for(var e=0;e<p[t].queue.length;e++)p[t].queue[e]();p[t].queue.splice(0)}else for(var n=p[t].queue.splice(0),r=0;r<n.length;r++)n[r]();p[t].tick=v=!1}},b=function(t){return function(e){p[t].queue.push(e),v||p[t].tick||(p[t].tick=v=!0,setTimeout(y))}},g=b(0);b(1),e.prototype={on:function(t,e){return{}.on.call(this,t,e),n.call(this,t),this},removeListener:function(t,e){return{}.on.call(this,t,e),n.call(this,t),this},once:function(t,e){return this.on(t,function(){return this.removeListener(t,_listener),e.apply(this,arguments)})}},r.prototype={push:function(e){if(e.length){var n={chunk:t.from(e),encoding:"binary",next:null};this._buffer.length&&(this._buffer[this._buffer.length-1].next=n),this._buffer.push(n),this.length+=n.chunk.length}return this.length},unshift:function(e){var n={chunk:t.from(e),encoding:"binary",next:null};return this._buffer.length&&(n.next=this._buffer[0]),this._buffer.unshift(n),this.length+=n.chunk.length,this.length},nodes:function(t){var e=this,n=this._buffer.splice(0,t);return n.forEach(function(t){return e.length-=t.chunk.length}),n},at:function(t){if(!(t>=this.length||t<0))for(var e=0;e<this._buffer.length;e++){var n=this._buffer[e].chunk;if(t<n.length)return{index:t,nodeIndex:e,value:n[t]};t-=n.length}},for:function(t,e,n){for(var r=this._buffer[t.nodeIndex],i=t.nodeIndex;i<r.chunk.length;i++)n.call(this,r.chunk[i]);for(var o=1+t.nodeIndex;o<e.nodeIndex;o++)for(var u=this._buffer[o],s=0;s<u.chunk.length;s++)n.call(this,u.chunk[s]);if(t.nodeIndex<e.nodeIndex)for(var a=this._buffer[e.nodeIndex],h=0;h<=e.index;h++)n.call(this,a.chunk[h])},slice:function(e){if(void 0===e&&(e=this.length),!e)return t.from([]);e>this.length&&(e=this.length);var n=void 0;e&&(n=this.at(e)),n||(n={index:this.length-1,nodeIndex:this._buffer.length-1});var r=t.from(Array(e)),i=this._buffer.slice(0,n.nodeIndex).reduce(function(t,e){return r.set(e.chunk,t),t+e.chunk.length},0);if(i<e){var o=this._buffer[n.nodeIndex];r.set(o.chunk.slice(0,e-i),i)}return r},buffer:function(e){if(void 0===e&&(e=this.length),!e)return t.from([]);e>this.length&&(e=this.length);var n=void 0;e&&(n=this.at(e)),n||(n={index:this.length-1,nodeIndex:this._buffer.length-1});var r=t.from(Array(e)),i=this.nodes(1+n.nodeIndex).reduce(function(t,e){return r.set(e.chunk,t),t+e.chunk.length},0);if(i<e){var o=this.nodes(1)[0];r.set(o.chunk.slice(0,e-i),i),o.chunk=o.chunk.slice(e-i),this.unshift(o.chunk)}return r}};var _=64;u.prototype={setup:function(){return this._busState.configured?Promise.reject("already configured"):(this._busState.configured=!0,this._setup.apply(this,arguments))},push:function(e){var n=this;e.length&&(this._busState.push(e),this._busState.ticker||(this._busState.ticker=!0,g(function(){n._busState.ticker=!1,function(){var e=this,n=this._busState,r=n.watching,u=(n.frame,n._buffer);if(r.length){for(this._busState.nodeIndex<0&&(this._busState.nodeIndex=0);this._busState.nodeIndex<u.length;this._busState.nodeIndex++)for(var s=u[this._busState.nodeIndex].chunk,a=0,h=0,c=!1;a<s.length;a++){this._busState.active||(this._busState.active=this._busState.watching.reduce(function(n,r){var i=r.patterns;try{return r.currentPattern="function"==typeof i[0]?i[0](t.from([])):i[0],r.active=!0,n+1}catch(t){return e.emit("error",t),n}},0));var f=s[a];for(h=0;h<r.length;h++,c=!1){var l=r[h];if(l.active){var d=l.currentPattern[l.byteIndex];if(void 0===d||d===f)c=!0;else if(Array.isArray(d)){if(l.arrayOffset<=0&&d[0]>0&&(l.arrayOffset=d[0]),--l.arrayOffset>0){l.index++;continue}c=!0}else if("function"==typeof d)try{c=!!d.call(this,f,l.index,this._busState.slice(l.index))}catch(t){c=!1,this.emit("error",t)}if(c){if(l.index++,++l.byteIndex>=l.currentPattern.length)if(++l.patternIndex>=l.patterns.length){var p=this._busState.buffer(l.index);this._busState.nodeIndex=-1;try{l.callback(p,l.pattern)}catch(t){this.emit("error",t)}r.forEach(function(t){i(t),o.call(e)})}else{var v=l.patterns[l.patternIndex];l.byteIndex=0;try{l.currentPattern="function"==typeof v?v.call(this,this._busState.slice(l.index)):v}catch(t){i(l),o.call(this),this.emit("error",t)}}}else i(l),o.call(this),this._busState.active||this.emit("error",{msg:"Unparsed chunk",data:this._busState.buffer()})}}}this._busState.active&&this.emit("drain")}else this.emit("error",{msg:"Unexpected watching data",data:this._busState.buffer()})}.call(n)})))},watch:function(t,e){var n=i({patterns:t,callback:e.bind(this)});return this._busState.watching.push(n),n},unwatch:function(t){if(t){var e=this._busState.watching.indexOf(t);e>=0&&this._busState.watching.splice(e,1)}else this._busState.watching.splice(0);return this},rx:function(t){var e=this,n=void 0,r={};if("function"==typeof(arguments.length<=1?void 0:arguments[1]))n=arguments.length<=1?void 0:arguments[1];else{if("function"!=typeof(arguments.length<=2?void 0:arguments[2]))throw new ReferenceError("Callback is not provided");n=arguments.length<=2?void 0:arguments[2],Object.assign(r,arguments.length<=1?void 0:arguments[1])}var i=void 0,o=function(){i=e.watch(t,n),e._read(e.options.highWaterMark)};return"timeout"in r?setTimeout(o,r.timeout):o(),i},tx:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"timeout"in n?setTimeout(function(){e._write(t)},n.timeout):this._write(t),this},reset:function(){return this._busState.watching.splice(0),this}};var m=[1,2,3],x=[4,function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return console.log(e),!0},6],k=new(function(){function t(){var e=this,n=arguments;t.prototype[c].forEach(function(r){r!==t&&r.apply(e,n)})}var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.apply||(e.apply=[]),e.super||(e.super=[]),e.static||(e.static=[]);var n=e.super[0];e.name||(e.name=n.name),function(e,n){Object.defineProperty(t,"name",{value:e})}(e.name);for(var r in e.static)for(var i in e.static[r])"prototype"!=i&&Object.defineProperty(t,i,{value:proto[i],enumerable:!0,writable:!0});Object.defineProperty(t,"prototype",{value:{}}),Object.defineProperty(t.prototype,"constructor",{value:n}),Object.defineProperty(t.prototype,f,{value:!0});for(var o in e.super){var u=function(){};u.prototype=e.super[o].prototype;var s=new u;for(var a in s)["constructor",f,h,c].indexOf(a)<0&&Object.defineProperty(t.prototype,a,{value:s[a],enumerable:!0,writable:!0})}return l(t,e.super,h,!1),l(t,e.apply,c,!0),t}({super:[u,e],apply:[u,e]}))({read:function(){},write:function(){},setup:function(){}});k.on("error",console.error),k.rx([m,x],console.log),k.push(m);
//# sourceMappingURL=index.pico.min.js.map
