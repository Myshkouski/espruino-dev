{"version":3,"file":"index.esp.rollup.js","sources":["../lib/alive.js","../lib/buffer/utils/to/arrayToBuffer.js","../lib/buffer/utils/to/stringToBuffer.js","../lib/buffer/utils/to/index.js","../lib/buffer/index.js","../lib/def.js","../lib/vars.js","../lib/extend.js","../lib/setImmediate.js","../lib/process.js","../lib/events.js","../lib/stream/stream.js","../lib/stream/readable.js","../lib/stream/writable.js","../lib/stream/duplex.js","../lib/bus/index.js","../src/index.js"],"sourcesContent":["let alive = null\r\nconst defaultInterval = 200\r\n\r\nconst blink = (led, on = defaultInterval, off = on * 5) => {\r\n  led.write(true)\r\n  setTimeout(() => {\r\n    led.write(false)\r\n    if(alive)\r\n      setTimeout(() => blink(led, on, off), off)\r\n  }, on)\r\n}\r\n\r\nconst start = (...args) => {\r\n  let on = true\r\n  if(!alive) {\r\n    alive = true\r\n    blink(LED2)\r\n  }\r\n}\r\n\r\nconst stop = () => {\r\n  if(alive) {\r\n    alive = false\r\n  }\r\n}\r\n\r\nexport default (mode, onTimeout, offTimeout) => {\r\n  if(mode === undefined)\r\n    mode = !alive\r\n\r\n  !mode\r\n    ? stop()\r\n    : start()\r\n\r\n  return !!alive\r\n}\r\n","import Proto from '../../proto'\r\n\r\nexport default function arrayToBuffer(arr) {\r\n\treturn new Proto(arr)\r\n}\r\n","import Proto from '../../proto'\r\n\r\nexport default function stringToUint8Array(str) {\r\n\tconst arr = []\r\n\r\n\tfor(let c in str)\r\n\t\tarr[c] = str.charCodeAt(c)\r\n\r\n\treturn new Proto(arr)\r\n}\r\n","import Proto from '../../proto'\r\nimport arrayToBuffer from './arrayToBuffer'\r\nimport stringToBuffer from './stringToBuffer'\r\n\r\nfunction toBuffer(iterable) {\r\n  if(typeof iterable === 'string')\r\n    return stringToBuffer(iterable)\r\n\r\n  if(iterable instanceof Proto || iterable instanceof Array)\r\n\t\treturn arrayToBuffer(iterable)\r\n}\r\n\r\nexport {\r\n  toBuffer,\r\n  arrayToBuffer,\r\n  stringToBuffer\r\n}\r\n","import Proto from './proto'\r\nimport { toBuffer } from './utils/to'\r\n\r\nfunction _createBuffer() {\r\n\tconst iterable = toBuffer(arguments[0])\r\n\tlet \toffset = arguments[1] !== undefined ? arguments[1] : 0,\r\n\t\t\t\tlength = arguments[2] !== undefined ? arguments[2] : iterable.length\r\n\r\n\tconst array = []\r\n\r\n\tfor(let i = offset;i--;)\r\n\t\tarray[i] = 0\r\n\r\n\tfor(let i = 0; (i < iterable.length) && (i < length); i++)\r\n\t\tarray[offset + i] = iterable[i]\r\n\r\n\tfor(let i = array.length; i < length; i++)\r\n\t\tarray[i] = 0\r\n\r\n\tconst buffer = new Proto(array)\r\n\r\n\treturn buffer\r\n}\r\n\r\nfunction copy(target) {\r\n\tconst source = this,\r\n\t\t\t\ttargetStart \t= arguments[1] !== undefined ? arguments[1] : 0,\r\n\t\t\t\tsourceStart \t= arguments[2] !== undefined ? arguments[2] : 0,\r\n\t\t\t\tsourceEnd \t\t= arguments[3] !== undefined ? arguments[3] : source.length\r\n\r\n\tlet copied = 0\r\n\r\n\tfor(let sourceIndex = sourceStart, targetIndex = targetStart; sourceIndex < sourceEnd; sourceIndex++, targetIndex++, copied++)\r\n\t\ttarget.set([ source[sourceIndex] ], targetIndex)\r\n\r\n\treturn copied\r\n}\r\n\r\nfunction Buffer() {\r\n\tthrow new Error('Buffer constructor is deprecated. Use Buffer.from() instead.')\r\n}\r\n\r\nBuffer.from = function from() {\r\n\treturn _createBuffer.apply(null, arguments)\r\n}\r\n\r\nBuffer.concat = function concat() {\r\n\tconst list = arguments[0] || []\r\n\tconst totalLength = arguments[1] !== undefined ? arguments[1] : list.reduce((totalLength, array) => (totalLength + array.length), 0)\r\n\r\n\tlet buffer = _createBuffer([], 0, totalLength)\r\n\tlet offset = 0\r\n\r\n\tlist.forEach(buf => {\r\n\t\tbuffer.set(buf, offset)\r\n\t\toffset += buf.length\r\n\t})\r\n\r\n\treturn buffer\r\n}\r\n\r\nexport default Buffer\r\n","const defProp = (obj, prop, desc) => {\r\n  try {\r\n    Object.defineProperty(obj, prop, desc)\r\n    return obj\r\n  } catch(e) {\r\n    if(desc.get)\r\n      obj.value = desc.get()\r\n    else if(desc.value)\r\n      obj[prop] = desc.value\r\n\r\n    return obj\r\n  }\r\n}\r\n\r\nexport {\r\n  defProp\r\n}\r\n","const SUPER_CHAIN_PROTO_PROP = 'super_',\r\n  SUPER_CHAIN_APPLY_PROP = 'apply_'\r\n\r\nexport {\r\n  SUPER_CHAIN_PROTO_PROP,\r\n  SUPER_CHAIN_APPLY_PROP\r\n}\r\n","import {\r\n  SUPER_CHAIN_PROTO_PROP,\r\n  SUPER_CHAIN_APPLY_PROP\r\n} from './vars'\r\n\r\nconst _extend = (options = {}) => {\r\n  if(!options.apply)\r\n    options.apply = []\r\n  if(!options.super)\r\n    options.super = []\r\n\r\n  const Child = options.super[0]\r\n\r\n  function Extended() {\r\n    options.apply.forEach(Super => Super.apply(this, arguments))\r\n  }\r\n\r\n  defProp(Extended, 'name', { get: () => Child.name })\r\n  defProp(Extended, 'prototype', { value: {} })\r\n\r\n  options.super.forEach(Super => {\r\n    function Proto() {}\r\n    Proto.prototype = Super.prototype\r\n\r\n    const proto = new Proto()\r\n\r\n    for(let prop in proto)\r\n      if(prop !== SUPER_CHAIN_PROTO_PROP)\r\n        defProp(Extended.prototype, prop, {\r\n          value: proto[prop],\r\n          enumerable: true,\r\n          writable: true\r\n        })\r\n  })\r\n\r\n  defProp(Extended.prototype, 'constructor', { value: Child })\r\n  defProp(Extended.prototype, SUPER_CHAIN_PROTO_PROP, { value: options.super })\r\n  defProp(Extended.prototype, SUPER_CHAIN_APPLY_PROP, { value: options.apply })\r\n\r\n  return Extended\r\n}\r\n\r\nconst extend = (...args) => _extend({ super: args, apply: args })\r\n\r\nexport { extend, _extend }\r\n","const _setImmediate = global.setImmediate || (f => setTimeout(f, 0))\r\n\r\nexport default _setImmediate\r\n","const _process = global.process || {}\r\n\r\nif( !_process.nextTick )\r\n  _process.nextTick = setImmediate\r\n\r\nexport default _process\r\n","function EventEmitter() {}\r\n\r\nEventEmitter.prototype.on = function on() {\r\n  Object.prototype.on.apply(this, arguments)\r\n\r\n  return this\r\n}\r\n\r\nexport default EventEmitter\r\n","import EventEmitter from 'events'\r\n\r\nfunction _Stream(options = {}) {\r\n\tthis.options = {\r\n\t\thighWaterMark: options.highWaterMark || 128\r\n\t}\r\n}\r\n\r\nconst Stream = _extend({\r\n\tsuper: [_Stream, EventEmitter],\r\n\tapply: [_Stream]\r\n})\r\n\r\nexport default Stream\r\n","import Stream from './stream'\r\n\r\nfunction _readFree() {\r\n\treturn this._read(this._readableState.highWaterMark - this._readableState.buffer.length)\r\n}\r\n\r\nfunction _readFromInternalBuffer(length) {\r\n\tconst data = this._readableState.buffer.slice(0, length !== undefined ? length : this.options.highWaterMark)\r\n\tthis._readableState.buffer = Buffer.from([])\r\n\r\n\treturn data\r\n}\r\n\r\nfunction _broadcast() {\r\n\tif(this._readableState.buffer.length > 0)\r\n\t\tthis.emit('data', _readFromInternalBuffer.call(this))\r\n}\r\n\r\nfunction _flow() {\r\n\tif(this._readableState.flowing === true)\r\n\t\t_broadcast.call(this)\r\n\r\n\tprocess.nextTick(() => _readFree.call(this))\r\n}\r\n\r\nfunction _end() {\r\n\tthis._readableState.flowing = null\r\n\tthis._readableState.ended = true\r\n\r\n}\r\n\r\nfunction _Readable(options = {}) {\r\n\tthis._readableState = {\r\n\t\tbuffer: Buffer.from([]),\r\n\t\tflowing: null,\r\n\t\tended: false\r\n\t}\r\n\r\n\tthis.pipes = []\r\n\r\n\tthis._read = options.read\r\n\tif(!this._read)\r\n\t\tthrow new TypeError('_read() is not implemented')\r\n\tif(!this._read instanceof Function)\r\n\t\tthrow new TypeError('\\'options.read\\' should be a function, passed', typeof options.read)\r\n}\r\n\r\nconst Readable = extend(_Readable, Stream)\r\n\r\nReadable.prototype.pause = function pause() {\r\n\tif(this._readableState.flowing !== false) {\r\n\t\tthis._readableState.flowing = false\r\n\t\tthis.emit('pause')\r\n\t}\r\n\r\n\treturn this\r\n}\r\n\r\nReadable.prototype.resume = function resume() {\r\n\tif(!this._readableState.flowing) {\r\n\t\tthis._readableState.flowing = true\r\n\t\tthis.emit('resume')\r\n\t\t_flow.call(this)\r\n\t}\r\n\r\n\t_broadcast.call(this)\r\n\r\n\treturn this\r\n}\r\n\r\nReadable.prototype.read = function read() {\r\n\tconst length = arguments[0] !== undefined ? arguments[0] : this.options.highWaterMark\r\n\treturn _readFromInternalBuffer.call(this, length)\r\n}\r\n\r\nReadable.prototype.push = function push(chunk) {\r\n\tif(chunk === null) {\r\n\t\t_end.call(this)\r\n\t\treturn false\r\n\t}\r\n\r\n\tconst data = Buffer.from(chunk)\r\n\r\n\tif(data.length)\r\n\t\tthis._readableState.buffer = Buffer.concat([this._readableState.buffer, data], this._readableState.buffer.length + data.length)\r\n\r\n\tconst overflow = this._readableState.buffer.length > this.options.highWaterMark\r\n\r\n\tif(!overflow)\r\n\t\t_flow.call(this)\r\n\r\n\treturn !overflow\r\n}\r\n\r\nReadable.prototype.pipe = function pipe(writable) {\r\n\tif(!this.pipes.some(pipe => (pipe.writable === writable))) {\r\n\t\tconst listener = data => writable.write(data)\r\n\r\n\t\tthis\r\n\t\t\t.on('data', listener)\r\n\t\t\t.pipes.push({ writable, listener })\r\n\t}\r\n\r\n\treturn writable\r\n}\r\n\r\nReadable.prototype.unpipe = function unpipe(writable) {\r\n  if(writable) {\r\n    const pipe = this.pipes.find(pipe => ( pipe.writable === writable ))\r\n\r\n    if(pipe)\r\n      this.removeListener('data', pipe.listener)\r\n  }\r\n\r\n  else {\r\n    for(let { listener } of this.pipes)\r\n      this.removeListener(listener)\r\n    this.pipes.splice(0, this.pipes.length)\r\n  }\r\n}\r\n\r\nReadable.prototype.on = function on(event, listener) {\r\n\tif(event === 'data')\r\n\t\tthis.resume()\r\n\r\n\treturn Stream.prototype.on.apply(this, arguments)\r\n}\r\n\r\nReadable.prototype.removeListener = function removeListener(event, listener) {\r\n\tif(event === 'data')\r\n\t\tthis.pause()\r\n\r\n\treturn Stream.prototype.removeListener.apply(this, arguments)\r\n}\r\n\r\nReadable.prototype.isPaused = function isPaused() {\r\n\treturn !this._readableState.flowing\r\n}\r\n\r\nexport default Readable\r\n","import Stream from './stream'\r\n\r\nfunction write(chunk/*, encoding*/) {\r\n  const self = this\r\n\r\n  const data = {\r\n    chunk: Buffer.from(chunk),\r\n    encoding: 'binary',\r\n    next: null\r\n  }\r\n\r\n  // = Buffer.concat([self._writableState.buffer, buffer], self._writableState.buffer.length + buffer.length)\r\n\r\n  const state = self._writableState\r\n  const buffer = state.buffer\r\n\r\n  buffer.push(data)\r\n  buffer[ buffer.length - 1 ].next = data\r\n  state.length += data.chunk.length\r\n\r\n  function _writeInternalBuffer() {\r\n    if(!buffer.length)\r\n      return\r\n\r\n    function cb(err) {\r\n      process.nextTick(() => {\r\n        if(err)\r\n          throw err\r\n\r\n        state.consumed = true\r\n\r\n        if(buffer.length > 0)\r\n          _writeInternalBuffer()\r\n      })\r\n    }\r\n\r\n    if(!state.corked && state.consumed) {\r\n      state.consumed = false\r\n\r\n      let toConsume\r\n\r\n      if(self._writev && buffer.length > 1) {\r\n        toConsume = buffer.map(d => ({ chunk: d.chunk, encoding: d.encoding}))\r\n        buffer.splice(0, buffer.length)\r\n        state.length = 0\r\n        self._writev(toConsume, cb)\r\n      }\r\n      else {\r\n        toConsume = buffer.shift()\r\n        state.length -= toConsume.chunk.length\r\n        self._write(toConsume.chunk, toConsume.encoding, cb)\r\n      }\r\n    }\r\n  }\r\n\r\n  _writeInternalBuffer()\r\n\r\n  return state.length > self.options.highWaterMark\r\n}\r\n\r\nfunction _Writable(options = {}) {\r\n  this._write = options.write\r\n\r\n  this._writableState = {\r\n    buffer: [],\r\n    length: 0,\r\n    getBuffer: () => this._writableState.buffer,\r\n\r\n    corked: false,\r\n    consumed: true\r\n  }\r\n}\r\n\r\nconst Writable = extend(_Writable, Stream)\r\n\r\nWritable.prototype.write = write\r\n\r\nexport default Writable\r\n","import Readable from './readable'\r\nimport Writable from './writable'\r\n\r\nfunction _Duplex(options = {}) {\r\n\r\n}\r\n\r\nconst Duplex = extend(_Duplex, Readable, Writable)\r\n\r\nexport default Duplex\r\n","import { Duplex } from 'stream'\r\n\r\nfunction _read(size) {\r\n\r\n}\r\n\r\nfunction _write() {\r\n\r\n}\r\n\r\nfunction _setup() {}\r\n\r\nfunction _Bus(options = {}) {\r\n  if(!options.setup)\r\n    options.setup = _setup.bind(this)\r\n\r\n  Duplex.call(this, {\r\n    read: _read,\r\n    write: _write\r\n  })\r\n\r\n  this.options.frameTypes = []\r\n  this.options._frameState = {\r\n    buffer: []\r\n  }\r\n}\r\n\r\nconst Bus = _extend({\r\n  super: [Duplex],\r\n  apply: [_Bus]\r\n})\r\n\r\nBus.prototype.tx = function tx() {\r\n\r\n}\r\n\r\nBus.prototype.rx = function rx() {\r\n\r\n}\r\n\r\nexport default Bus\r\n","import { Duplex, Writable, Readable } from 'stream'\r\nimport Bus from 'bus'\r\nimport EE from 'events'\r\n\r\nfunction read() {}\r\nfunction write() {}\r\n\r\nconst bus = new Bus()\r\nconst readable = new Readable({ read })\r\nconst writable = new Writable({ write })\r\nconst duplex = new Duplex({ read, write })\r\n\r\nalive()\r\n"],"names":["alive","defaultInterval","blink","led","on","off","write","setTimeout","start","LED2","stop","mode","onTimeout","offTimeout","undefined","arrayToBuffer","arr","Proto","stringToUint8Array","str","c","charCodeAt","toBuffer","iterable","stringToBuffer","Array","_createBuffer","arguments","offset","length","array","i","buffer","Buffer","Error","from","apply","concat","list","totalLength","reduce","forEach","set","buf","defProp","obj","prop","desc","defineProperty","e","get","value","SUPER_CHAIN_PROTO_PROP","SUPER_CHAIN_APPLY_PROP","_extend","options","super","Child","Extended","Super","name","prototype","proto","extend","args","_setImmediate","global","setImmediate","f","_process","process","nextTick","EventEmitter","_Stream","highWaterMark","Stream","_readFree","_read","_readableState","_readFromInternalBuffer","data","slice","_broadcast","emit","call","_flow","flowing","_end","ended","_Readable","pipes","read","TypeError","Function","Readable","pause","resume","push","chunk","overflow","pipe","writable","some","listener","unpipe","find","removeListener","splice","event","isPaused","self","state","_writableState","next","_writeInternalBuffer","cb","err","consumed","corked","toConsume","_writev","map","d","encoding","shift","_write","_Writable","Writable","_Duplex","Duplex","size","_setup","_Bus","setup","bind","frameTypes","_frameState","Bus","tx","rx","bus","readable","duplex"],"mappings":"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"}