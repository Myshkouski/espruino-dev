{"version":3,"file":"index.esp.rollup.js","sources":["../lib/alive.js","../lib/buffer/index.js","../lib/def.js","../lib/namedFunc.js","../lib/vars.js","../lib/extend.js","../lib/event-loop/index.js","../lib/process.js","../lib/events.js","../lib/stream/stream.js","../lib/stream/readable.js","../lib/stream/writable.js","../lib/stream/duplex.js","../lib/stream/Duplex.js","../lib/stream/transform.js","../lib/stream/passthrough.js","../lib/bus/index.js","../src/index.js"],"sourcesContent":["let alive = null\r\nconst defaultInterval = 20\r\n\r\nconst blink = (led, on = 20, off = 1000 - defaultInterval) => {\r\n  led.write(true)\r\n  setTimeout(() => {\r\n    led.write(false)\r\n    if(alive)\r\n      setTimeout(() => blink(led, on, off), off)\r\n  }, on)\r\n}\r\n\r\nconst start = () => {\r\n  let on = true\r\n  if(!alive) {\r\n    alive = true\r\n\r\n    blink(LED2)\r\n  }\r\n}\r\n\r\nconst stop = () => {\r\n  if(alive) {\r\n    alive = false\r\n  }\r\n}\r\n\r\nexport default mode => {\r\n  if(mode === undefined)\r\n    mode = !alive\r\n\r\n  !mode\r\n    ? stop()\r\n    : start()\r\n\r\n  return !!alive\r\n}\r\n","import Proto from './proto'\r\nimport { toBuffer } from './utils/to'\r\n\r\nfunction copy(target) {\r\n\tconst targetStart \t= arguments[1] !== undefined ? arguments[1] : 0,\r\n\t\t\t\tsourceStart \t= arguments[2] !== undefined ? arguments[2] : 0,\r\n\t\t\t\tsourceEnd \t\t= arguments[3] !== undefined ? arguments[3] : source.length\r\n\r\n\tlet copied = 0\r\n\r\n\tfor(let sourceIndex = sourceStart, targetIndex = targetStart; sourceIndex < sourceEnd; sourceIndex++, targetIndex++, copied++)\r\n\t\ttarget.set([ this[sourceIndex] ], targetIndex)\r\n\r\n\treturn copied\r\n}\r\n\r\nfunction Buffer() {\r\n\tthrow new Error('Buffer constructor is deprecated. Use Buffer.from() instead.')\r\n}\r\n\r\nBuffer.from = function _createBuffer() {\r\n\t//console.log(arguments)\r\n\tlet iterable = []\r\n\tif(typeof arguments[0] === 'string') {\r\n    for(let c in arguments[0])\r\n  \t\titerable[c] = arguments[0].charCodeAt(c)\r\n\r\n  \titerable = new Proto(iterable)\r\n  }\r\n\r\n  else if(arguments[0] instanceof Proto || arguments[0] instanceof Array)\r\n\t\titerable = new Proto(arguments[0])\r\n\r\n\tconst offset = arguments[1] !== undefined ? arguments[1] : 0,\r\n\t\tlength = arguments[2] !== undefined ? arguments[2] : iterable.length\r\n\r\n\tconst array = []\r\n\r\n\tfor(let i = offset;i--;)\r\n\t\tarray[i] = 0\r\n\r\n\tfor(let i = 0; (i < iterable.length) && (i < length); i++)\r\n\t\tarray[offset + i] = iterable[i]\r\n\r\n\tfor(let i = array.length; i < length; i++)\r\n\t\tarray[i] = 0\r\n\r\n\tconst buffer = new Proto(array)\r\n\r\n\treturn buffer\r\n}\r\n\r\nBuffer.concat = function concat() {\r\n\tconst list = arguments[0] || [],\r\n\t\ttotalLength = arguments[1] !== undefined ? arguments[1] : list.reduce((totalLength, array) => (totalLength + array.length), 0)\r\n\r\n\tlet buffer = _createBuffer([], 0, totalLength),\n\t\toffset = 0\r\n\r\n\tlist.forEach(buf => {\r\n\t\tbuffer.set(buf, offset)\r\n\t\toffset += buf.length\r\n\t})\r\n\r\n\treturn buffer\r\n}\r\n\r\nexport default Buffer\r\n","const defProp = (obj, prop, desc) => {\r\n  try {\r\n    Object.defineProperty(obj, prop, desc)\r\n    return obj\r\n  } catch(e) {\r\n    if(desc.get)\r\n      obj.value = desc.get()\r\n    else if(desc.value)\r\n      obj[prop] = desc.value\r\n\r\n    return obj\r\n  }\r\n}\r\n\r\nexport {\r\n  defProp\r\n}\r\n","export default (name, f) => {\r\n  defProp(f, 'name', { value: name })\r\n  defProp(f, 'toString', { value: () => '[Function' + (f.name !== undefined ? ': ' + f.name : '') + ']' })\r\n\r\n  return f\r\n}\r\n","const SUPER_CHAIN_PROTO_PROP = 'super_',\r\n  SUPER_CHAIN_APPLY_PROP = 'apply_'\r\n\r\nexport {\r\n  SUPER_CHAIN_PROTO_PROP,\r\n  SUPER_CHAIN_APPLY_PROP\r\n}\r\n","import {\r\n  SUPER_CHAIN_PROTO_PROP,\r\n  SUPER_CHAIN_APPLY_PROP\r\n} from './vars'\r\n\r\nconst _copyChainToExtended = (Extended, ProtoChain, chainPropName, ignoreExtended) => {\r\n  //if chain on [Extended] have not been created yet\r\n  if(!Extended.prototype[chainPropName])\r\n    defProp(Extended.prototype, chainPropName, { value: [] })\r\n\r\n\r\n\r\n  //for every [Proto] in passed chain\r\n  ProtoChain.forEach(Proto => {\r\n    //console.log(!!Proto.prototype['__extended__'], Proto)\r\n    //if [Proto] has been '__extended__' and has same-named proto chain, copy the Proto chain to Extended chain\r\n    const isExtended = !!Proto.prototype['__extended__'],\r\n      hasSameChain = !!Proto.prototype[chainPropName]\r\n\r\n    const alreadyInChain = Extended.prototype[chainPropName].some(P => (P === Proto)),\r\n      shouldBePushed = (!isExtended || !ignoreExtended) && !alreadyInChain,\r\n      shouldCopyChain = isExtended && hasSameChain\r\n\r\n    if(shouldCopyChain)\r\n      Proto.prototype[chainPropName].forEach(Proto => {\r\n        //avoid pushing twice\r\n        if(!Extended.prototype[chainPropName].some(P => (P === Proto))) {\r\n          //console.log('pushed', Proto)\r\n          Extended.prototype[chainPropName].push(Proto)\r\n        }\r\n      })\r\n\r\n    if(shouldBePushed)\r\n      Extended.prototype[chainPropName].push(Proto)\r\n  })\r\n\r\n  //console.log(Extended.prototype[chainPropName])\r\n}\r\n\r\nconst _extend = (options = {}) => {\r\n  if(!options.apply)\r\n    options.apply = []\r\n  if(!options.super)\r\n    options.super = []\r\n\r\n  const Child = options.super[0]\r\n\r\n  if(!options.name)\r\n    options.name = Child.name\r\n\r\n  function Extended() {\r\n    Extended.prototype[SUPER_CHAIN_APPLY_PROP].forEach(Super => {\r\n      if(Super !== Extended)\r\n        Super.apply(this, arguments)\r\n    })\r\n  }\r\n\r\n  _named(options.name, Extended)\r\n  defProp(Extended, 'prototype', { value: {} })\r\n\r\n  options.super.forEach(Super => {\n    function Proto() {}\r\n    Proto.prototype = Super.prototype\r\n\r\n    const proto = new Proto()\r\n\r\n    for(let prop in proto) {\r\n      //console.log(prop)\r\n      if(prop !== '__extended__' && prop !== SUPER_CHAIN_PROTO_PROP && prop !== SUPER_CHAIN_APPLY_PROP)\r\n        defProp(Extended.prototype, prop, {\r\n          value: proto[prop],\r\n          enumerable: true,\r\n          writable: true\r\n        })\r\n    }\r\n  })\r\n\r\n  defProp(Extended.prototype, 'constructor', { value: Child })\r\n  defProp(Extended.prototype, '__extended__', { value: true })\r\n\r\n  _copyChainToExtended(Extended, options.super, SUPER_CHAIN_PROTO_PROP, false)\r\n  _copyChainToExtended(Extended, options.apply, SUPER_CHAIN_APPLY_PROP, true)\r\n\r\n  return Extended\r\n}\r\n\r\nconst extend = (...args) => _extend({ super: args, apply: args })\r\n\r\nexport { extend, _extend }\r\n","let runImmediate = [],\r\n  runNextTick = [],\r\n  set = false\r\n\r\nconst plan = () => {\r\n  if(!set) {\r\n    set = true\r\n    setTimeout(() => {\r\n      const query = [...runNextTick, ...runImmediate]\r\n      runNextTick = []\r\n      runImmediate = []\r\n      query.forEach(f => f())\r\n      set = false\r\n    }, 0)\r\n  }\r\n},\r\n    planOnNextTick = f => {\r\n      runNextTick.push(f)\r\n      plan()\r\n    },\r\n    planImmediate = f => {\r\n      runImmediate.push(f)\r\n      plan()\r\n    }\r\n\r\nexport { planOnNextTick, planImmediate }\r\n","import { planOnNextTick } from 'event-loop'\r\n\r\nconst _process = global.process || {}\r\n\r\nif( !_process.nextTick )\r\n  _process.nextTick = planOnNextTick\r\n\r\nexport default _process\r\n","function EventEmitter() { }\r\n\r\n_named('EventEmitter', EventEmitter)\r\n\r\nEventEmitter.prototype.on = function on() {\r\n  Object.prototype.on.apply(this, arguments)\r\n\r\n  return this\r\n}\r\n\r\nEventEmitter.prototype.once = function once(event, listener) {\r\n  function _listener() {\r\n    this.removeListener(event, _listener)\r\n    return listener.apply(this, arguments)\r\n  }\r\n\r\n  return this.on(event, _listener)\r\n}\r\n\r\nexport default EventEmitter\r\n","import EventEmitter from 'events'\r\n\r\nfunction _Stream(options = {}) {\r\n\tthis.options = {\r\n\t\thighWaterMark: options.highWaterMark || 128\r\n\t}\r\n}\r\n\r\n_named('Stream', _Stream)\r\n\r\nconst Stream = _extend({\r\n\tname: 'Stream',\r\n\tsuper: [EventEmitter],\r\n\tapply: [EventEmitter, _Stream]\r\n})\r\n\r\nexport default Stream\r\n","import Stream from './stream'\r\n\r\nconst ENCODINGS = {\r\n\tBINARY: 'binary',\r\n\tUTF8: 'utf8'\r\n}\r\n\r\nfunction _readFree() {\r\n\t//console.log('_readFree()')\r\n\treturn this._read(this._readableState.highWaterMark - this._readableState.length)\r\n}\r\n\r\nfunction _readFromInternalBuffer(length = this.options.highWaterMark) {\r\n\tconst buffer = []\n\n\tif(this._readableState.length > 0 && length > 0) {\n\t\tlet red = 0\n\t\twhile(this._readableState.length > 0 && red < length) {\n\t\t\tconst data = this._readableState.buffer[0]\n\t\t\tif(red + data.chunk.length <= length) {\n\t\t\t\tthis._readableState.buffer.shift()\r\n\t\t\t\tthis._readableState.length -= data.chunk.length\n\t\t\t\tred += length\n\t\t\t\tbuffer.push(data)\n\t\t\t}\n\t\t\telse\n\t\t\t\tbreak\n\t\t}\n\t}\r\n\r\n\treturn buffer\r\n}\r\n\r\nfunction toString(binary) {\r\n\tlet str = ''\r\n\tfor(let i = 0; i < binary.length; i++)\r\n\t\tstr += String.fromCharCode(binary[i])\r\n\treturn str\r\n}\r\n\r\nfunction _broadcast() {\r\n\t//console.log('_broadcast()')\r\n\tconst buffer = _readFromInternalBuffer.call(this)\r\n\tif(buffer.length > 0) {\r\n\t\tprocess.nextTick(() => {\n\t\t\t//console.log('buffer', buffer)\n\t\t\tbuffer.forEach(data => {\r\n\t\t\t\tthis.emit('data', data.chunk, data.encoding)\r\n\t\t\t})\n\t\t})\r\n\t}\r\n}\r\n\r\nfunction _flow() {\r\n\t//console.log('_flow()', this._readableState.flowing)\r\n\tif(this._readableState.flowing) {\r\n\t\t_broadcast.call(this)\r\n\t\tprocess.nextTick(() => _readFree.call(this))\r\n\t}\r\n}\r\n\r\nfunction _end() {\r\n\tthis._readableState.flowing = null\r\n\tthis._readableState.ended = true\r\n\r\n}\r\n\r\nfunction _Readable(options = {}) {\r\n\tthis._readableState = {\r\n\t\tbuffer: [],//Buffer.from([]),\r\n\t\tlength: 0,\r\n\t\tflowing: null,\r\n\t\tended: false,\r\n\t\tdefaultEncoding: ENCODINGS.UTF8\r\n\t}\r\n\r\n\tthis.pipes = []\r\n\r\n\tthis._read = options.read.bind(this)\r\n\r\n\tif(!this._read)\r\n\t\tthrow new TypeError('_read() is not implemented')\r\n\tif(!this._read instanceof Function)\r\n\t\tthrow new TypeError('\\'options.read\\' should be a function, passed', typeof options.read)\r\n}\r\n_named('Readable', _Readable)\r\n\r\nconst Readable = _extend({\r\n\tname: 'Readable',\r\n\tsuper: [Stream],\r\n\tapply: [Stream, _Readable]\r\n})\r\n\r\nReadable.prototype.pause = function pause() {\r\n\tconsole.log('pause()')\r\n\tif(this._readableState.flowing !== false) {\r\n\t\tthis._readableState.flowing = false\r\n\t\tthis.emit('pause')\r\n\t}\r\n\r\n\treturn this\r\n}\r\n\r\nReadable.prototype.resume = function resume() {\r\n\t//console.log('resume()')\r\n\tif(!this._readableState.flowing) {\r\n\t\tthis._readableState.flowing = true\r\n\t\tthis.emit('resume')\r\n\t\t_flow.call(this)\r\n\t}\r\n\r\n\t//_broadcast.call(this)\r\n\r\n\treturn this\r\n}\r\n\r\nReadable.prototype.read = function read(length = this.options.highWaterMark) {\r\n\treturn _readFromInternalBuffer.call(this, length)\r\n}\r\n\r\nReadable.prototype.push = function push(chunk) {\r\n\t//console.log('push(' + chunk + ')')\r\n\tif(chunk === null) {\r\n\t\t_end.call(this)\r\n\t\treturn false\r\n\t}\r\n\r\n\tconst data = {\r\n\t\tchunk: Buffer.from(chunk),\r\n\t\tnext: null\r\n\t}\r\n\r\n\tif(this._readableState.buffer.length)\r\n    this._readableState.buffer[this._readableState.buffer.length - 1].next = data\r\n  this._readableState.buffer.push(data)\r\n  this._readableState.length += data.chunk.length\r\n\r\n\tconst overflow = this._readableState.length > this.options.highWaterMark\r\n\r\n\tif(!overflow)\r\n\t\t_flow.call(this)\r\n\r\n\treturn !overflow\r\n}\r\n\r\nReadable.prototype.pipe = function pipe(writable) {\r\n\tif(!this.pipes.some(pipe => (pipe.writable === writable))) {\r\n\t\tconst listener = (data, pipe) => {\r\n\t\t\tif(!writable.write(data)) {\r\n\t\t\t\tconsole.log('pipe should be stopped!')\r\n\t\t\t\tpipe.stopped = true\r\n\t\t\t\tthis.pause()\r\n\r\n\t\t\t\twritable.once('drain', () => this.resume())\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst pipe = { writable, listener, stopped: undefined }\r\n\r\n\t\tthis\r\n\t\t\t.on('data', data => listener(data, pipe))\r\n\t\t\t.pipes.push(pipe)\r\n\t}\r\n\r\n\treturn writable\r\n}\r\n\r\nReadable.prototype.unpipe = function unpipe(writable) {\r\n  if(writable) {\r\n    const pipe = this.pipes.find(pipe => ( pipe.writable === writable ))\r\n\r\n    if(pipe)\r\n      this.removeListener('data', pipe.listener)\r\n  }\r\n\r\n  else {\r\n    for(let { listener } of this.pipes)\r\n      this.removeListener(listener)\r\n    this.pipes.splice(0, this.pipes.length)\r\n  }\r\n}\r\n\r\nReadable.prototype.on = function on(event, listener) {\r\n\tif(event === 'data')\r\n\t\tthis.resume()\r\n\r\n\treturn Stream.prototype.on.apply(this, arguments)\r\n}\r\n\r\nReadable.prototype.removeListener = function removeListener(event, listener) {\r\n\tif(event === 'data') {\r\n\t\tconsole.log(this.listeners)\r\n\t\t//this.pause()\r\n\t}\r\n\r\n\treturn Stream.prototype.removeListener.apply(this, arguments)\r\n}\r\n\r\nReadable.prototype.isPaused = function isPaused() {\r\n\treturn !this._readableState.flowing\r\n}\r\n\r\nexport default Readable\r\n","import Stream from './stream'\r\n\r\nfunction _readFromInternalBuffer(...args) {\r\n  const spliced = this._writableState.buffer.splice(...args)\r\n  this._writableState.length -= spliced.reduce((length, data) => (length += data.chunk.length), 0)\r\n\r\n  if(this._writableState.needDrain && (this._writableState.length < this.options.highWaterMark)) {\r\n    this._writableState.needDrain = false\r\n    this.emit('drain')\r\n  }\r\n\r\n  return spliced\r\n}\r\n\r\nfunction _writeToInternalBuffer(chunk, encoding) {\r\n  const data = {\r\n    chunk: Buffer.from(chunk),\r\n    encoding: 'binary',\r\n    next: null\r\n  }\r\n\r\n  if(this._writableState.buffer.length)\r\n    this._writableState.buffer[this._writableState.buffer.length - 1].next = data\r\n  this._writableState.buffer.push(data)\r\n  this._writableState.length += data.chunk.length\r\n\r\n  return this._writableState.buffer\r\n}\r\n\r\nfunction write(chunk/*, encoding*/) {\r\n  //console.log('write(' + chunk + ')')\r\n  _writeToInternalBuffer.apply(this, arguments)\r\n\r\n  ;(function _consume() {\r\n    if(!this._writableState.buffer.length)\r\n      return\r\n\r\n    const cb = err => {\r\n      if(err)\r\n        throw err\r\n\r\n      process.nextTick(() => {\r\n        this._writableState.consumed = true\r\n\r\n        if(this._writableState.buffer.length > 0)\r\n          _consume()\r\n      })\r\n    }\r\n\r\n    if(!this._writableState.corked && this._writableState.consumed) {\r\n      this._writableState.consumed = false\r\n\r\n      if(this._writev && this._writableState.buffer.length > 1) {\r\n        const toConsume = _readFromInternalBuffer\r\n          .call(this, 0, this._writableState.buffer.length)\r\n          .map(d => ({ chunk: d.chunk, encoding: d.encoding}))\r\n\r\n        this._writev(toConsume, cb)\r\n      }\r\n      else {\r\n        const toConsume = _readFromInternalBuffer.call(this, 0, 1).shift()\r\n\r\n        this._write(toConsume.chunk, toConsume.encoding, cb)\r\n      }\r\n    }\r\n  }).call(this)\r\n\r\n  return this._writableState.length < this.options.highWaterMark\r\n}\r\n\r\nfunction _Writable(options = {}) {\r\n\tthis._write = options.write.bind(this)\r\n\r\n  this._writableState = {\r\n    buffer: [],\r\n    length: 0,\r\n    getBuffer: () => this._writableState.buffer,\r\n\r\n    corked: 0,\r\n    consumed: true,\r\n    needDrain: false,\r\n    defaultEncoding: 'utf8',\r\n    decodeStrings: true\r\n  }\r\n}\r\n\r\n_named('Writable', _Writable)\r\n\r\nconst Writable = _extend({\r\n\tname: 'Writable',\r\n  super: [Stream],\r\n  apply: [Stream, _Writable]\r\n})\r\n\r\nWritable.prototype.write = write\r\n\r\nexport default Writable\r\n","import Readable from './readable'\r\nimport Writable from './writable'\r\n\r\nfunction _Duplex(options = {}) {}\r\n_named('Duplex', _Duplex)\r\n\r\nconst Duplex = _extend({\r\n\tname: 'Duplex',\r\n  super: [Readable, Writable],\r\n  apply: [Readable, Writable, _Duplex]\r\n})\r\n\r\nDuplex.prototype.on = function on() {\r\n  Readable.prototype.on.apply(this, arguments)\r\n  //Writable.prototype.on.apply(this, arguments)\r\n\r\n  return this\r\n}\r\n\r\nexport default Duplex\r\n","import Readable from './readable'\r\nimport Writable from './writable'\r\n\r\nfunction _Duplex(options = {}) {}\r\n_named('Duplex', _Duplex)\r\n\r\nconst Duplex = _extend({\r\n\tname: 'Duplex',\r\n  super: [Readable, Writable],\r\n  apply: [Readable, Writable, _Duplex]\r\n})\r\n\r\nDuplex.prototype.on = function on() {\r\n  Readable.prototype.on.apply(this, arguments)\r\n  //Writable.prototype.on.apply(this, arguments)\r\n\r\n  return this\r\n}\r\n\r\nexport default Duplex\r\n","import Duplex from './Duplex'\r\n\r\nfunction _read(size) {\r\n  //console.log('_read()')\r\n  //dumb function\r\n}\r\n\r\nfunction _write(data, encoding, cb) {\r\n  console.log('_write(' + data + ')')\r\n  return this._transform(data, encoding, cb)\r\n}\r\n\r\nfunction _Transform(options = {}) {\r\n  Duplex.call(this, {\r\n    read: _read,\r\n    write: _write,\r\n    highWaterMark: options.highWaterMark\r\n  })\r\n\r\n  this._transform = options.transform.bind(this)\r\n}\r\n\r\nconst Transform = _extend({\r\n\tname: 'Transform',\r\n  super: [Duplex],\r\n  apply: [_Transform]\r\n})\r\n\r\nexport default Transform\r\n","import Transform from './transform'\r\n\r\nfunction _transform(data, encoding, cb) {\r\n  this.push(data, encoding)\r\n  cb()\r\n}\r\n\r\nfunction _PassThrough(options = {}) {\r\n  Transform.call(this, {\n    highWaterMark: options.highWaterMark,\n    transform: _transform\n  })\r\n}\r\n\r\nconst PassThrough = _extend({\r\n  super: [Transform],\r\n  apply: [_PassThrough]\r\n})\r\n\r\nexport default PassThrough\r\n","import { Duplex } from 'stream'\r\n\r\nfunction _read(size) {\r\n\r\n}\r\n\r\nfunction _write(data, encoding, cb) {\r\n  const binary = Buffer.from(data)\r\n  this._busState.parsing = Buffer.concat([this._busState.parsing, binary], this._busState.parsing.length + binary.length)\r\n\r\n  //optimize\r\n\r\n  this.frameSet.some(frameSet => {\r\n    let frame\r\n\r\n    try {\r\n      frame = frameSet.decode.call(this, this._busState.parsing)\r\n    } catch(err) {\r\n      return false\r\n    }\r\n\r\n    //this.options._busState.parsedFrames.push(frame)\r\n\r\n    this.emit('frame', frame)\r\n\r\n    return true\r\n  })\r\n\r\n  cb()\r\n}\r\n\r\nfunction _Bus(options = {}) {\r\n  Duplex.call(this, {\r\n    read: _read,\r\n    write: _write,\r\n    highWaterMark: options.highWaterMark\r\n  })\r\n\r\n  defProp(this, 'setup', {\r\n    value: (...args) => {\r\n      if(!this._busState.configured) {\r\n        //console.log(options.setup)\r\n        options.setup.apply(this, args)\r\n      }\r\n      else\r\n        throw new Error('Bus has been already set up.')\r\n\r\n      return this\r\n    }\r\n  })\r\n\r\n  this.frameSet = []\r\n  /*this.options.optimize = {\r\n    handlers: [],\r\n\r\n  }*/\r\n  this._busState = {\r\n    configured: false,\r\n    parsing: Buffer.from([]),\r\n    //parsedFrames: []\r\n  }\r\n}\r\n\r\nconst Bus = _extend({\r\n  super: [Duplex],\r\n  apply: [_Bus]\r\n})\r\n\r\nBus.prototype.tx = function tx(binary, cb) {\r\n\r\n}\r\n\r\nBus.prototype.rx = function rx() {\r\n\r\n}\r\n\r\nexport default Bus\r\n","import { Readable, Writable, Duplex, Transform, PassThrough } from 'stream'\r\nimport Bus from 'bus'\r\n\r\nalive()\r\n\r\nconst CONSTANTS = {\r\n  PN532_PREAMBLE                      : 0x00,\r\n  PN532_STARTCODE1                    : 0x00,\r\n  PN532_STARTCODE2                    : 0xFF,\r\n  PN532_POSTAMBLE                     : 0x00,\r\n\r\n  PN532_HOSTTOPN532                   : 0xD4,\r\n\r\n  // PN532 Commands\r\n  PN532_COMMAND_DIAGNOSE              : 0x00,\r\n  PN532_COMMAND_GETFIRMWAREVERSION    : 0x02,\r\n  PN532_COMMAND_GETGENERALSTATUS      : 0x04,\r\n  PN532_COMMAND_READREGISTER          : 0x06,\r\n  PN532_COMMAND_WRITEREGISTER         : 0x08,\r\n  PN532_COMMAND_READGPIO              : 0x0C,\r\n  PN532_COMMAND_WRITEGPIO             : 0x0E,\r\n  PN532_COMMAND_SETSERIALBAUDRATE     : 0x10,\r\n  PN532_COMMAND_SETPARAMETERS         : 0x12,\r\n  PN532_COMMAND_SAMCONFIGURATION      : 0x14,\r\n  PN532_COMMAND_POWERDOWN             : 0x16,\r\n  PN532_COMMAND_RFCONFIGURATION       : 0x32,\r\n  PN532_COMMAND_RFREGULATIONTEST      : 0x58,\r\n  PN532_COMMAND_INJUMPFORDEP          : 0x56,\r\n  PN532_COMMAND_INJUMPFORPSL          : 0x46,\r\n  PN532_COMMAND_INLISTPASSIVETARGET   : 0x4A,\r\n  PN532_COMMAND_INATR                 : 0x50,\r\n  PN532_COMMAND_INPSL                 : 0x4E,\r\n  PN532_COMMAND_INDATAEXCHANGE        : 0x40,\r\n  PN532_COMMAND_INCOMMUNICATETHRU     : 0x42,\r\n  PN532_COMMAND_INDESELECT            : 0x44,\r\n  PN532_COMMAND_INRELEASE             : 0x52,\r\n  PN532_COMMAND_INSELECT              : 0x54,\r\n  PN532_COMMAND_INAUTOPOLL            : 0x60,\r\n  PN532_COMMAND_TGINITASTARGET        : 0x8C,\r\n  PN532_COMMAND_TGSETGENERALBYTES     : 0x92,\r\n  PN532_COMMAND_TGGETDATA             : 0x86,\r\n  PN532_COMMAND_TGSETDATA             : 0x8E,\r\n  PN532_COMMAND_TGSETMETADATA         : 0x94,\r\n  PN532_COMMAND_TGGETINITIATORCOMMAND : 0x88,\r\n  PN532_COMMAND_TGRESPONSETOINITIATOR : 0x90,\r\n  PN532_COMMAND_TGGETTARGETSTATUS     : 0x8A,\r\n\r\n  PN532_WAKEUP                        : 0x55,\r\n\r\n  /*PN532_SPI_STATREAD                  : 0x02,\r\n  PN532_SPI_DATAWRITE                 : 0x01,\r\n  PN532_SPI_DATAREAD                  : 0x03,\r\n  PN532_SPI_READY                     : 0x01,*/\r\n\r\n  PN532_I2C_ADDRESS                   : 0x48 >> 1,\r\n  PN532_I2C_READBIT                   : 0x01,\r\n  PN532_I2C_BUSY                      : 0x00,\r\n  PN532_I2C_READY                     : 0x01,\r\n  PN532_I2C_READYTIMEOUT              : 20,\r\n\r\n  /*PN532_MIFARE_ISO14443A              : 0x00,\r\n\r\n  // Mifare Commands\r\n  MIFARE_CMD_AUTH_A                   : 0x60,\r\n  MIFARE_CMD_AUTH_B                   : 0x61,\r\n  MIFARE_CMD_READ                     : 0x30,\r\n  MIFARE_CMD_WRITE                    : 0xA0,\r\n  MIFARE_CMD_TRANSFER                 : 0xB0,\r\n  MIFARE_CMD_DECREMENT                : 0xC0,\r\n  MIFARE_CMD_INCREMENT                : 0xC1,\r\n  MIFARE_CMD_RESTORE                  : 0xC2,\r\n\r\n  // Prefixes for NDEF Records : to identify record type,\r\n  NDEF_URIPREFIX_NONE                 : 0x00,\r\n  NDEF_URIPREFIX_HTTP_WWWDOT          : 0x01,\r\n  NDEF_URIPREFIX_HTTPS_WWWDOT         : 0x02,\r\n  NDEF_URIPREFIX_HTTP                 : 0x03,\r\n  NDEF_URIPREFIX_HTTPS                : 0x04,\r\n  NDEF_URIPREFIX_TEL                  : 0x05,\r\n  NDEF_URIPREFIX_MAILTO               : 0x06,\r\n  NDEF_URIPREFIX_FTP_ANONAT           : 0x07,\r\n  NDEF_URIPREFIX_FTP_FTPDOT           : 0x08,\r\n  NDEF_URIPREFIX_FTPS                 : 0x09,\r\n  NDEF_URIPREFIX_SFTP                 : 0x0A,\r\n  NDEF_URIPREFIX_SMB                  : 0x0B,\r\n  NDEF_URIPREFIX_NFS                  : 0x0C,\r\n  NDEF_URIPREFIX_FTP                  : 0x0D,\r\n  NDEF_URIPREFIX_DAV                  : 0x0E,\r\n  NDEF_URIPREFIX_NEWS                 : 0x0F,\r\n  NDEF_URIPREFIX_TELNET               : 0x10,\r\n  NDEF_URIPREFIX_IMAP                 : 0x11,\r\n  NDEF_URIPREFIX_RTSP                 : 0x12,\r\n  NDEF_URIPREFIX_URN                  : 0x13,\r\n  NDEF_URIPREFIX_POP                  : 0x14,\r\n  NDEF_URIPREFIX_SIP                  : 0x15,\r\n  NDEF_URIPREFIX_SIPS                 : 0x16,\r\n  NDEF_URIPREFIX_TFTP                 : 0x17,\r\n  NDEF_URIPREFIX_BTSPP                : 0x18,\r\n  NDEF_URIPREFIX_BTL2CAP              : 0x19,\r\n  NDEF_URIPREFIX_BTGOEP               : 0x1A,\r\n  NDEF_URIPREFIX_TCPOBEX              : 0x1B,\r\n  NDEF_URIPREFIX_IRDAOBEX             : 0x1C,\r\n  NDEF_URIPREFIX_FILE                 : 0x1D,\r\n  NDEF_URIPREFIX_URN_EPC_ID           : 0x1E,\r\n  NDEF_URIPREFIX_URN_EPC_TAG          : 0x1F,\r\n  NDEF_URIPREFIX_URN_EPC_PAT          : 0x20,\r\n  NDEF_URIPREFIX_URN_EPC_RAW          : 0x21,\r\n  NDEF_URIPREFIX_URN_EPC              : 0x22,\r\n  NDEF_URIPREFIX_URN_NFC              : 0x23,\r\n\r\n  PN532_GPIO_VALIDATIONBIT            : 0x80,\r\n  PN532_GPIO_P30                      : 0,\r\n  PN532_GPIO_P31                      : 1,\r\n  PN532_GPIO_P32                      : 2,\r\n  PN532_GPIO_P33                      : 3,\r\n  PN532_GPIO_P34                      : 4,\r\n  PN532_GPIO_P35                      : 5,*/\r\n\r\n  PN532_SAM_NORMAL_MODE               : 0x01,\r\n  PN532_SAM_VIRTUAL_CARD              : 0x02,\r\n  PN532_SAM_WIRED_CARD                : 0x03,\r\n  PN532_SAM_DUAL_CARD                 : 0x04,\r\n\r\n  PN532_BRTY_ISO14443A               : 0x00,\r\n  PN532_BRTY_ISO14443B               : 0x03,\r\n  PN532_BRTY_212KBPS                 : 0x01,\r\n  PN532_BRTY_424KBPS                 : 0x02,\r\n  PN532_BRTY_JEWEL                   : 0x04,\r\n  NFC_WAIT_TIME                      : 30,\r\n  NFC_CMD_BUF_LEN                    : 64,\r\n  NFC_FRAME_ID_INDEX                 : 6\r\n}\r\n\r\nconst cmd = function(c, readBytes) {\r\n  var i,arr = [CONSTANTS.PN532_PREAMBLE,CONSTANTS.PN532_STARTCODE1,CONSTANTS.PN532_STARTCODE2,\r\n     c.length+1,(~c.length)&0xFF, CONSTANTS.PN532_HOSTTOPN532]\r\n  for (i in c) arr.push(c[i])\r\n  var checksum = -arr[0]\r\n  for (i in arr)\r\n    checksum+=arr[i]\r\n  arr.push((~checksum) & 0xFF)\r\n  checksum=0\r\n  for (i in arr)\r\n    checksum+=arr[i]\r\n  arr.push(CONSTANTS.PN532_POSTAMBLE)\r\n  return new Uint8Array(arr)\r\n}\r\n\r\nSerial1.setup(115200, {\r\n  rx: B7, tx: B6\r\n})\r\n\r\nconst wakeup = new Uint8Array([0x55, 0x55, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00])\r\nconst c = cmd([CONSTANTS.PN532_COMMAND_GETFIRMWAREVERSION])\r\nconst sam = cmd([CONSTANTS.PN532_COMMAND_SAMCONFIGURATION, CONSTANTS.PN532_SAM_NORMAL_MODE,20, 0])\r\n\r\nconst w = new Writable({\r\n  write(d, e, cb) {\r\n    console.log(d)\r\n    cb()\r\n  }\r\n})\r\n\r\nSerial1.pipe(w)\r\n\r\n//Serial1.write(wakeup)\r\n//Serial1.write(sam)\r\nsetInterval(() => Serial1.write(c), 1500)\r\n"],"names":["alive","defaultInterval","blink","led","on","off","write","setTimeout","start","LED2","stop","mode","undefined","Buffer","Error","from","_createBuffer","iterable","arguments","c","charCodeAt","Proto","Array","offset","length","array","i","buffer","concat","list","totalLength","reduce","forEach","set","buf","defProp","obj","prop","desc","defineProperty","e","get","value","name","f","SUPER_CHAIN_PROTO_PROP","SUPER_CHAIN_APPLY_PROP","_copyChainToExtended","Extended","ProtoChain","chainPropName","ignoreExtended","prototype","isExtended","hasSameChain","alreadyInChain","some","P","shouldBePushed","shouldCopyChain","push","_extend","options","apply","super","Child","Super","proto","runImmediate","runNextTick","plan","query","planOnNextTick","_process","global","process","nextTick","EventEmitter","_named","once","event","listener","_listener","removeListener","_Stream","highWaterMark","Stream","ENCODINGS","_readFree","_read","_readableState","_readFromInternalBuffer","red","data","chunk","shift","_broadcast","call","emit","encoding","_flow","flowing","_end","ended","_Readable","UTF8","pipes","read","bind","TypeError","Function","Readable","pause","log","resume","next","overflow","pipe","writable","stopped","unpipe","find","splice","listeners","isPaused","spliced","_writableState","needDrain","_writeToInternalBuffer","_consume","cb","err","consumed","corked","_writev","toConsume","map","d","_write","_Writable","Writable","_Duplex","Duplex","size","_transform","_Transform","transform","Transform","_PassThrough","PassThrough","binary","_busState","parsing","frameSet","frame","decode","_Bus","args","configured","setup","Bus","tx","rx","CONSTANTS","cmd","readBytes","arr","PN532_PREAMBLE","PN532_STARTCODE1","PN532_STARTCODE2","PN532_HOSTTOPN532","checksum","PN532_POSTAMBLE","Uint8Array","Serial1","B7","B6","PN532_COMMAND_GETFIRMWAREVERSION","sam","PN532_COMMAND_SAMCONFIGURATION","PN532_SAM_NORMAL_MODE","w","setInterval"],"mappings":"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"}