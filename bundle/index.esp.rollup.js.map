{"version":3,"file":"index.esp.rollup.js","sources":["../lib/alive.js","../lib/instanceOf.js","../lib/buffer/utils/to/arrayToBuffer.js","../lib/buffer/utils/to/stringToBuffer.js","../lib/buffer/utils/to/index.js","../lib/buffer/index.js","../lib/extend.js","../lib/setImmediate.js","../lib/process.js","../lib/events.js","../lib/stream/stream.js","../lib/stream/readable.js","../lib/stream/writable.js","../lib/stream/duplex.js","../src/index.js"],"sourcesContent":["let alive = null\r\n\r\nconst start = () => {\r\n  let on = true\r\n  if(!alive)\r\n    alive = setInterval(() => {\r\n      LED2.write(on)\r\n      on = !on\r\n    }, 500)\r\n}\r\n\r\nconst stop = () => {\r\n  if(alive) {\r\n    clearInterval(alive)\r\n    alive = null\r\n  }\r\n}\r\n\r\nexport default mode => {\r\n  if(mode === undefined)\r\n    mode = !alive\r\n\r\n  !mode\r\n    ? stop()\r\n    : start()\r\n\r\n  return !!alive\r\n}\r\n","const _superChain = (obj, Proto, _checked) => {\r\n  if(obj && obj.super_ instanceof Array) {\r\n    return obj.super_.some(Super => {\r\n      if(Super === Proto)\r\n        return true\r\n      if(_checked.some(Class => (Class === Super)))\r\n        return false\r\n\r\n      _checked.push(Super)\r\n\r\n      return _superChain(obj.super_, Super, _checked)\r\n    })\r\n  }\r\n}\r\n\r\nexport default (instance, Proto) => {\r\n  return instance instanceof Proto || !!_superChain(instance, Proto, [])\r\n}\r\n","import Proto from '../../proto'\r\n\r\nexport default function arrayToBuffer(arr) {\r\n\treturn new Proto(arr)\r\n}\r\n","import Proto from '../../proto'\r\n\r\nexport default function stringToUint8Array(str) {\r\n\tconst arr = []\r\n\r\n\tfor(let c in str)\r\n\t\tarr[c] = str.charCodeAt(c)\r\n\r\n\treturn new Proto(arr)\r\n}\r\n","import Proto from '../../proto'\r\nimport arrayToBuffer from './arrayToBuffer'\r\nimport stringToBuffer from './stringToBuffer'\r\n\r\nfunction toBuffer(iterable) {\r\n  if(typeof iterable === 'string')\r\n    return stringToBuffer(iterable)\r\n\r\n  if(iterable instanceof Proto || iterable instanceof Array)\r\n\t\treturn arrayToBuffer(iterable)\r\n}\r\n\r\nexport {\r\n  toBuffer,\r\n  arrayToBuffer,\r\n  stringToBuffer\r\n}\r\n","import Proto from './proto'\r\nimport { toBuffer } from './utils/to'\r\n\r\nfunction _createBuffer() {\r\n\tconst iterable = toBuffer(arguments[0])\r\n\tlet \toffset = arguments[1] !== undefined ? arguments[1] : 0,\r\n\t\t\t\tlength = arguments[2] !== undefined ? arguments[2] : iterable.length\r\n\r\n\tconst array = []\r\n\r\n\tfor(let i = offset;i--;)\r\n\t\tarray[i] = 0\r\n\r\n\tfor(let i = 0; (i < iterable.length) && (i < length); i++)\r\n\t\tarray[offset + i] = iterable[i]\r\n\r\n\tfor(let i = array.length; i < length; i++)\r\n\t\tarray[i] = 0\r\n\r\n\tconst buffer = new Proto(array)\r\n\r\n\treturn buffer\r\n}\r\n\r\nfunction copy(target) {\r\n\tconst source = this,\r\n\t\t\t\ttargetStart \t= arguments[1] !== undefined ? arguments[1] : 0,\r\n\t\t\t\tsourceStart \t= arguments[2] !== undefined ? arguments[2] : 0,\r\n\t\t\t\tsourceEnd \t\t= arguments[3] !== undefined ? arguments[3] : source.length\r\n\r\n\tlet copied = 0\r\n\r\n\tfor(let sourceIndex = sourceStart, targetIndex = targetStart; sourceIndex < sourceEnd; sourceIndex++, targetIndex++, copied++)\r\n\t\ttarget.set([ source[sourceIndex] ], targetIndex)\r\n\r\n\treturn copied\r\n}\r\n\r\nfunction Buffer() {\r\n\tthrow new Error('Buffer constructor is deprecated. Use Buffer.from() instead.')\r\n}\r\n\r\nBuffer.from = function from() {\r\n\treturn _createBuffer.apply(null, arguments)\r\n}\r\n\r\nBuffer.concat = function concat() {\r\n\tconst list = arguments[0] || []\r\n\tconst totalLength = arguments[1] !== undefined ? arguments[1] : list.reduce((totalLength, array) => (totalLength + array.length), 0)\r\n\r\n\tlet buffer = _createBuffer([], 0, totalLength)\r\n\tlet offset = 0\r\n\r\n\tfor (let buf of list) {\r\n\t\t\tbuffer.set(buf, offset)\r\n\t\t\toffset += buf.length\r\n\t}\r\n\r\n\treturn buffer\r\n}\r\n\r\nexport default Buffer\r\n","export default function extend(...args) {\r\n\tconst Child = args[0]\r\n\r\n\tfunction Extended() {\r\n\t\tfor(let Super of Extended.super_)\r\n\t\t\tSuper.apply(this, arguments)\r\n\r\n\t\tthis.super_ = Extended.super_\r\n  }\r\n\r\n\tExtended.super_ = args\r\n\tExtended.prototype = {}\r\n\r\n\tfor(let Super of args) {\r\n\t\tfunction Proto() {}\r\n\t\tProto.prototype = Super.prototype\r\n\r\n\t\tconst p = new Proto()\r\n\t\tfor(let prop in p)\r\n\t\t\tExtended.prototype[prop] = p[prop]//Object.assign(Extended.prototype, new Proto())\r\n\t}\r\n\r\n  Object.defineProperty(Extended.prototype, 'constructor', {\r\n      value: Child\r\n  })\r\n\r\n  return Extended\r\n}\r\n","if(global.setImmediate)\r\n  module.exports = setImmediate\r\nelse\r\n  module.exports = f => setTimeout(f, 0)\r\n","if(!process.nextTick) {\r\n  process.nextTick = setImmediate\r\n}\r\n\r\nexport default process\r\n","function EventEmitter() {}\r\n\r\nEventEmitter.prototype.on = function on() {\r\n\tObject.prototype.on.apply(this, arguments)\r\n\r\n\treturn this\r\n}\r\n\r\nexport default EventEmitter\r\n","import EventEmitter from 'events'\r\n\r\nfunction _Stream(options = {}) {\r\n\tthis.options = {\r\n\t\thighWaterMark: options.highWaterMark || 128\r\n\t}\r\n}\r\n\r\nconst Stream = extend(_Stream, EventEmitter)\r\n\r\nexport default Stream\r\n","import Stream from './stream'\r\n\r\nfunction _readFree() {\r\n\treturn this._read(this._readableState.highWaterMark - this._readableState.buffer.length)\r\n}\r\n\r\nfunction _readFromInternalBuffer(length) {\r\n\tconst data = this._readableState.buffer.slice(0, length !== undefined ? length : this.options.highWaterMark)\r\n\tthis._readableState.buffer = Buffer.from([])\r\n\r\n\treturn data\r\n}\r\n\r\nfunction _broadcast() {\r\n\tif(this._readableState.buffer.length > 0)\r\n\t\tthis.emit('data', _readFromInternalBuffer.call(this))\r\n}\r\n\r\nfunction _flow() {\r\n\tif(this._readableState.flowing === true)\r\n\t\t_broadcast.call(this)\r\n\r\n\tprocess.nextTick(() => _readFree.call(this))\r\n}\r\n\r\nfunction _end() {\r\n\tthis._readableState.flowing = null\r\n\tthis._readableState.ended = true\r\n\r\n}\r\n\r\nfunction _Readable(options = {}) {\r\n\tthis._readableState = {\r\n\t\tbuffer: Buffer.from([]),\r\n\t\tflowing: null,\r\n\t\tended: false\r\n\t}\r\n\r\n\tthis.pipes = []\r\n\r\n\tthis._read = options.read\r\n\tif(!this._read)\r\n\t\tthrow new TypeError('_read() is not implemented')\r\n\tif(!this._read instanceof Function)\r\n\t\tthrow new TypeError('\\'options.read\\' should be a function, passed', typeof options.read)\r\n}\r\n\r\nconst Readable = extend(_Readable, Stream)\r\n\r\nReadable.prototype.pause = function pause() {\r\n\tif(this._readableState.flowing !== false) {\r\n\t\tthis._readableState.flowing = false\r\n\t\tthis.emit('pause')\r\n\t}\r\n\r\n\treturn this\r\n}\r\n\r\nReadable.prototype.resume = function resume() {\r\n\tif(!this._readableState.flowing) {\r\n\t\tthis._readableState.flowing = true\r\n\t\tthis.emit('resume')\r\n\t\t_flow.call(this)\r\n\t}\r\n\r\n\t_broadcast.call(this)\r\n\r\n\treturn this\r\n}\r\n\r\nReadable.prototype.read = function read() {\r\n\tconst length = arguments[0] !== undefined ? arguments[0] : this.options.highWaterMark\r\n\treturn _readFromInternalBuffer.call(this, length)\r\n}\r\n\r\nReadable.prototype.push = function push(chunk) {\r\n\tif(chunk === null) {\r\n\t\t_end.call(this)\r\n\t\treturn false\r\n\t}\r\n\r\n\tconst data = Buffer.from(chunk)\r\n\r\n\tif(data.length)\r\n\t\tthis._readableState.buffer = Buffer.concat([this._readableState.buffer, data], this._readableState.buffer.length + data.length)\r\n\r\n\tconst overflow = this._readableState.buffer.length > this.options.highWaterMark\r\n\r\n\tif(!overflow)\r\n\t\t_flow.call(this)\r\n\r\n\treturn !overflow\r\n}\r\n\r\nReadable.prototype.pipe = function pipe(writable) {\r\n\tif(!this.pipes.some(pipe => (pipe.writable === writable))) {\r\n\t\tconst listener = data => writable.write(data)\r\n\r\n\t\tthis\r\n\t\t\t.on('data', listener)\r\n\t\t\t.pipes.push({ writable, listener })\r\n\t}\r\n\r\n\treturn writable\r\n}\r\n\r\nReadable.prototype.unpipe = function unpipe(writable) {\r\n  if(writable) {\r\n    const pipe = this.pipes.find(pipe => ( pipe.writable === writable ))\r\n\r\n    if(pipe)\r\n      this.removeListener('data', pipe.listener)\r\n  }\r\n\r\n  else {\r\n    for(let { listener } of this.pipes)\r\n      this.removeListener(listener)\r\n    this.pipes.splice(0, this.pipes.length)\r\n  }\r\n}\r\n\r\nReadable.prototype.on = function on(event, listener) {\r\n\tif(event === 'data')\r\n\t\tthis.resume()\r\n\r\n\treturn Stream.prototype.on.apply(this, arguments)\r\n}\r\n\r\nReadable.prototype.removeListener = function removeListener(event, listener) {\r\n\tif(event === 'data')\r\n\t\tthis.pause()\r\n\r\n\treturn Stream.prototype.removeListener.apply(this, arguments)\r\n}\r\n\r\nReadable.prototype.isPaused = function isPaused() {\r\n\treturn !this._readableState.flowing\r\n}\r\n\r\nexport default Readable\r\n","import Stream from './stream'\r\n\r\nfunction write(chunk/*, encoding*/) {\r\n  const self = this\r\n\r\n  const data = {\r\n    chunk: Buffer.from(chunk),\r\n    encoding: 'binary',\r\n    next: null\r\n  }\r\n\r\n  // = Buffer.concat([self._writableState.buffer, buffer], self._writableState.buffer.length + buffer.length)\r\n\r\n  const state = self._writableState\r\n  const buffer = state.buffer\r\n\r\n  buffer.push(data)\r\n  buffer[ buffer.length - 1 ].next = data\r\n  state.length += data.chunk.length\r\n\r\n  function _writeInternalBuffer() {\r\n    if(!buffer.length)\r\n      return\r\n\r\n    function cb(err) {\r\n      process.nextTick(() => {\r\n        if(err)\r\n          throw err\r\n\r\n        state.consumed = true\r\n\r\n        if(buffer.length > 0)\r\n          _writeInternalBuffer()\r\n      })\r\n    }\r\n\r\n    if(!state.corked && state.consumed) {\r\n      state.consumed = false\r\n\r\n      let toConsume\r\n\r\n      if(self._writev && buffer.length > 1) {\r\n        toConsume = buffer.map(d => ({ chunk: d.chunk, encoding: d.encoding}))\r\n        buffer.splice(0, buffer.length)\r\n        state.length = 0\r\n        self._writev(toConsume, cb)\r\n      }\r\n      else {\r\n        toConsume = buffer.shift()\r\n        state.length -= toConsume.chunk.length\r\n        self._write(toConsume.chunk, toConsume.encoding, cb)\r\n      }\r\n    }\r\n  }\r\n\r\n  _writeInternalBuffer()\r\n\r\n  return state.length > self.options.highWaterMark\r\n}\r\n\r\nfunction _Writable(options = {}) {\r\n  this._write = options.write\r\n\r\n  this._writableState = {\r\n    buffer: [],\r\n    length: 0,\r\n    getBuffer: () => this._writableState.buffer,\r\n\r\n    corked: false,\r\n    consumed: true\r\n  }\r\n}\r\n\r\nconst Writable = extend(_Writable, Stream)\r\n\r\nWritable.prototype.write = write\r\n\r\nexport default Writable\r\n","import Readable from './readable'\r\nimport Writable from './writable'\r\n\r\nfunction _Duplex(options = {}) {\r\n  \r\n}\r\n\r\nconst Duplex = extend(_Duplex, Readable, Writable)\r\n\r\nexport default Duplex\r\n","import { Duplex, Writable, Readable } from 'stream'\r\n\r\nconst d = new Duplex({\r\n  read() {}, write(d, e, cb) {\r\n    this.push(d)\r\n    cb()\r\n  }\r\n})\r\n\r\nconsole.log(!!d.read, !!d.write)\r\nconsole.log(d instanceof Writable)\r\n\r\nd.write('!')\r\nd.read(10)\r\n\r\nalive()\r\n"],"names":["alive","start","on","setInterval","write","stop","mode","undefined","_superChain","obj","Proto","_checked","super_","Array","some","Super","Class","push","instance","arrayToBuffer","arr","stringToUint8Array","str","c","charCodeAt","toBuffer","iterable","stringToBuffer","instanceOf","_createBuffer","arguments","offset","length","array","i","buffer","Buffer","Error","from","apply","concat","list","totalLength","reduce","buf","set","extend","args","Child","Extended","prototype","p","prop","defineProperty","global","setImmediate","module","setTimeout","f","process","nextTick","EventEmitter","_Stream","options","highWaterMark","Stream","_readFree","_read","_readableState","_readFromInternalBuffer","data","slice","_broadcast","emit","call","_flow","flowing","_end","ended","_Readable","pipes","read","TypeError","Readable","pause","resume","chunk","overflow","pipe","writable","listener","unpipe","find","removeListener","splice","event","isPaused","self","state","_writableState","next","_writeInternalBuffer","cb","err","consumed","corked","toConsume","_writev","map","d","encoding","shift","_write","_Writable","Writable","_Duplex","Duplex","e","console","log"],"mappings":"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"}