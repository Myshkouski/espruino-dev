{"version":3,"file":"index.esp.rollup.js","sources":["../lib/event-loop/loop.js","../lib/event-loop/defer.js","../lib/event-loop/setTimeout.js","../lib/blink.js","../lib/event-loop/nextTick.js","../lib/process.js","../lib/event-loop/setImmediate.js","../lib/promise.js","../helpers/def.js","../helpers/namedFunc.js","../lib/vars.js","../lib/extend.js","../lib/buffer/index.js","../lib/events.js","../lib/stream/stream.js","../lib/stream/readable.js","../lib/stream/writable.js","../lib/stream/duplex.js","../lib/stream/Duplex.js","../lib/stream/transform.js","../lib/stream/passthrough.js","../lib/schedule.js","../lib/bus/index.js","../lib/nfc/index.js","../src/index.js"],"sourcesContent":["function pushImmediate(queue) {\r\n  for (let i = 0; i < queue.length; i++)\r\n    queue[i]()\r\n  queue.splice(0)\r\n}\r\n\r\nfunction pushToNextIteration(_queue) {\r\n  const queue = [..._queue]\r\n  _queue.splice(0)\r\n  for (let i = 0; i < queue.length; i++)\r\n    queue[i]()\r\n}\r\n\r\nconst loop = {\r\n  nextTick: { queue: [], handle: pushImmediate, timer: false },\r\n  timeout: { queue: [], handle: pushToNextIteration, timer: false },\r\n  immediate: { queue: [], handle: pushImmediate, timer: false }\r\n}\r\n\r\nexport default loop\r\n","import loop from './loop'\r\n\r\nlet timer = false\r\n\r\nfunction asyncCall(cb) {\r\n  setTimeout(cb)\r\n}\r\n\r\nfunction asyncFlush() {\r\n  for (let i in loop) {\r\n    loop[i].handle(loop[i].queue)\r\n    loop[i].timer = timer = false\r\n  }\r\n}\r\n\r\nfunction defer(stage, cb) {\r\n  stage.queue.push(cb)\r\n\r\n  if (!timer && !stage.timer) {\r\n    stage.timer = timer = true\r\n    asyncCall(asyncFlush)\r\n  }\r\n}\r\n\r\nexport default defer\r\n","import defer from './defer'\r\nimport loop from './loop'\r\n\r\nconst _setTimeout = (function (cb, timeout) {\r\n  defer(loop.timeout, () => setTimeout(cb, timeout))\r\n})\r\n\r\nexport default _setTimeout\r\n","let status = false\r\nconst defaultInterval = 20\r\n\r\nfunction blink(mode) {\r\n  if(mode === undefined)\r\n    mode = !status\r\n\r\n  !mode\r\n    ? blink.stop()\r\n    : blink.start()\r\n\r\n  return !!status\r\n}\r\n\r\nblink.start = () => {\r\n  if(!status) {\r\n    status = true\r\n\r\n    blink.once(LED2, 20, function cb() {\r\n      if(status)\r\n        setTimeout(() => blink.once(LED2, 20, cb), 980)\r\n    })\r\n  }\r\n}\r\n\r\nblink.stop = () => {\r\n  if(status) {\r\n    status = false\r\n  }\r\n}\r\n\r\nblink.once = (led, on = 20, cb) => {\r\n  led.write(true)\r\n  setTimeout(() => {\r\n    led.write(false)\r\n    cb && cb()\r\n  }, on)\r\n}\r\n\r\nexport default blink\r\n","import defer from './defer'\r\nimport loop from './loop'\r\n\r\nconst _nextTick = (function nextTick(cb) {\r\n  defer(loop.nextTick, cb)\r\n}).bind(this)\r\n\r\nexport default _nextTick\r\n","import nextTick from 'nextTick'\r\n\r\nconst _process = typeof process !== 'undefined' ? process : {}\r\n\r\n_process.nextTick = typeof _process.nextTick !== 'undefined' ? _process.nextTick : nextTick\r\n\r\nexport default _process\r\n","import defer from './defer'\r\nimport loop from './loop'\r\n\r\nconst _setImmediate = (function(cb) {\r\n  defer(loop.immediate, cb)\r\n}).bind(this)\r\n\r\nexport default _setImmediate\r\n","var PENDING = 'pending';\nvar SEALED = 'sealed';\nvar FULFILLED = 'fulfilled';\nvar REJECTED = 'rejected';\n\nvar NOOP = function() {};\n\nfunction invokeResolver(resolver, promise) {\n  function resolvePromise(value) {\n    resolve(promise, value);\n  }\n\n  function rejectPromise(reason) {\n    reject(promise, reason);\n  }\n\n  try {\n    resolver(resolvePromise, rejectPromise);\n  } catch(e) {\n    rejectPromise(e);\n  }\n}\n\nfunction invokeCallback(subscriber){\n  var owner = subscriber.owner;\n  var settled = owner.state_;\n  var value = owner.data_;\n  var callback = subscriber[settled];\n  var promise = subscriber.then;\n\n  if (typeof callback === 'function')\n  {\n    settled = FULFILLED;\n    try {\n      value = callback(value);\n    } catch(e) {\n      reject(promise, e);\n    }\n  }\n\n  if (!handleThenable(promise, value))\n  {\n    if (settled === FULFILLED)\n      resolve(promise, value);\n\n    if (settled === REJECTED)\n      reject(promise, value);\n  }\n}\n\nfunction handleThenable(promise, value) {\n  var resolved;\n\n  try {\n    if (promise === value)\n      throw new TypeError('A promises callback cannot return that same promise.');\n\n    if (value && (typeof value === 'function' || typeof value === 'object'))\n    {\n      var then = value.then;  // then should be retrived only once\n\n      if (typeof then === 'function')\n      {\n        then.call(value, function(val){\n          if (!resolved)\n          {\n            resolved = true;\n\n            if (value !== val)\n              resolve(promise, val);\n            else\n              fulfill(promise, val);\n          }\n        }, function(reason){\n          if (!resolved)\n          {\n            resolved = true;\n\n            reject(promise, reason);\n          }\n        });\n\n        return true;\n      }\n    }\n  } catch (e) {\n    if (!resolved)\n      reject(promise, e);\n\n    return true;\n  }\n\n  return false;\n}\n\nfunction resolve(promise, value){\n  if (promise === value || !handleThenable(promise, value))\n    fulfill(promise, value);\n}\n\nfunction fulfill(promise, value){\n  if (promise.state_ === PENDING)\n  {\n    promise.state_ = SEALED;\n    promise.data_ = value;\n\n    setImmediate(() => publishFulfillment(promise));\n  }\n}\n\nfunction reject(promise, reason){\n  if (promise.state_ === PENDING)\n  {\n    promise.state_ = SEALED;\n    promise.data_ = reason;\n\n    setImmediate(() => publishRejection(promise));\n  }\n}\n\nfunction publish(promise) {\n  var callbacks = promise.then_;\n  promise.then_ = undefined;\n\n  for (var i = 0; i < callbacks.length; i++) {\n    invokeCallback(callbacks[i]);\n  }\n}\n\nfunction publishFulfillment(promise){\n  promise.state_ = FULFILLED;\n  publish(promise);\n}\n\nfunction publishRejection(promise){\n  promise.state_ = REJECTED;\n  publish(promise);\n}\n\nfunction Promise(resolver) {\n  if (typeof resolver !== 'function')\n    throw new TypeError('Promise constructor takes a function argument');\n\n  if (this instanceof Promise === false)\n    throw new TypeError('Failed to construct \\'Promise\\': Please use the \\'new\\' operator, this object constructor cannot be called as a function.');\n\n  this.then_ = [];\n\n  invokeResolver(resolver, this);\n}\n\nPromise.prototype = {\n  constructor: Promise,\n\n  state_: PENDING,\n  then_: null,\n  data_: undefined,\n\n  then: function(onFulfillment, onRejection){\n    var subscriber = {\n      owner: this,\n      then: new this.constructor(NOOP),\n      fulfilled: onFulfillment,\n      rejected: onRejection\n    };\n\n    if (this.state_ === FULFILLED || this.state_ === REJECTED)\n    {\n      // already resolved, call callback async\n      setImmediate(() => invokeCallback(subscriber));\n    }\n    else\n    {\n      // subscribe\n      this.then_.push(subscriber);\n    }\n\n    return subscriber.then;\n  },\n\n  'catch': function(onRejection) {\n    return this.then(null, onRejection);\n  }\n};\n\nPromise.all = function(promises){\n  var Class = this;\n\n  if (!(promises instanceof Array))\n    throw new TypeError('You must pass an array to Promise.all().');\n\n  return new Class(function(resolve, reject){\n    var results = [];\n    var remaining = 0;\n\n    function resolver(index){\n      remaining++;\n      return function(value){\n        results[index] = value;\n        if (!--remaining)\n          resolve(results);\n      };\n    }\n\n    for (var i = 0, promise; i < promises.length; i++)\n    {\n      promise = promises[i];\n\n      if (promise && typeof promise.then === 'function')\n        promise.then(resolver(i), reject);\n      else\n        results[i] = promise;\n    }\n\n    if (!remaining)\n      resolve(results);\n  });\n};\n\nPromise.race = function(promises){\n  var Class = this;\n\n  if (!(promises instanceof Array))\n    throw new TypeError('You must pass an array to Promise.race().');\n\n  return new Class(function(resolve, reject) {\n    for (var i = 0, promise; i < promises.length; i++)\n    {\n      promise = promises[i];\n\n      if (promise && typeof promise.then === 'function')\n        promise.then(resolve, reject);\n      else\n        resolve(promise);\n    }\n  });\n};\n\nPromise.resolve = function(value){\n  var Class = this;\n\n  if (value && typeof value === 'object' && value.constructor === Class)\n    return value;\n\n  return new Class(function(resolve){\n    resolve(value);\n  });\n};\n\nPromise.reject = function(reason){\n  var Class = this;\n\n  return new Class(function(resolve, reject){\n    reject(reason);\n  });\n};\n\nexport default Promise\n","const defProp = (obj, prop, desc) => {\r\n  try {\r\n    Object.defineProperty(obj, prop, desc)\r\n    return obj\r\n  } catch(e) {\r\n    if(desc.get)\r\n      obj.value = desc.get()\r\n    else if(desc.value)\r\n      obj[prop] = desc.value\r\n\r\n    return obj\r\n  }\r\n}\r\n\r\nexport {\r\n  defProp\r\n}\r\n","export default (name, f) => {\r\n  defProp(f, 'name', { value: name })\r\n  defProp(f, 'toString', { value: () => '[Function' + (f.name !== undefined ? ': ' + f.name : '') + ']' })\r\n\r\n  return f\r\n}\r\n","const SUPER_CHAIN_PROTO_PROP = '_super',\r\n  SUPER_CHAIN_APPLY_PROP = '_apply',\r\n  PROTOTYPE_IS_EXTENDED_PROP = '_isExtended'\r\n\r\nexport {\r\n  SUPER_CHAIN_PROTO_PROP,\r\n  SUPER_CHAIN_APPLY_PROP,\r\n  PROTOTYPE_IS_EXTENDED_PROP\r\n}\r\n","import {\r\n  SUPER_CHAIN_PROTO_PROP,\r\n  SUPER_CHAIN_APPLY_PROP,\r\n  PROTOTYPE_IS_EXTENDED_PROP\r\n} from './vars'\r\n\r\nconst _copyChain = (Extended, ProtoChain, chainPropName, ignoreExtended) => {\r\n  //if chain on [Extended] has not been created yet\r\n  if(!Extended.prototype[chainPropName])\r\n    defProp(Extended.prototype, chainPropName, { value: [] })\r\n\r\n  ProtoChain.forEach(Proto => {\r\n    //console.log(!!Proto.prototype['__extended__'], Proto)\r\n    //if [Proto] has been '__extended__' and has same-named proto chain, copy the Proto chain to Extended chain\r\n    const isExtended = !!Proto.prototype[PROTOTYPE_IS_EXTENDED_PROP],\r\n      hasSameChain = !!Proto.prototype[chainPropName]\r\n\r\n    const alreadyInChain = Extended.prototype[chainPropName].some(P => (P === Proto)),\r\n      shouldBePushed = (!isExtended || !ignoreExtended) && !alreadyInChain,\r\n      shouldCopyChain = isExtended && hasSameChain\r\n\r\n    if(shouldCopyChain)\r\n      Proto.prototype[chainPropName].forEach(Proto => {\r\n        //avoid pushing twice\r\n        if(!Extended.prototype[chainPropName].some(P => (P === Proto))) {\r\n          //console.log('pushed', Proto)\r\n          Extended.prototype[chainPropName].push(Proto)\r\n        }\r\n      })\r\n\r\n    if(shouldBePushed)\r\n      Extended.prototype[chainPropName].push(Proto)\r\n  })\r\n\r\n  //console.log(Extended.prototype[chainPropName])\r\n}\r\n\r\nconst _extend = (options = {}) => {\r\n  if(!options.apply)\r\n    options.apply = []\r\n  if(!options.super)\r\n    options.super = []\r\n\r\n  const Child = options.super[0]\r\n\r\n  if(!options.name)\r\n    options.name = Child.name\r\n\r\n  function Extended() {\r\n    Extended.prototype[SUPER_CHAIN_APPLY_PROP].forEach(Super => {\r\n      if(Super !== Extended)\r\n        Super.apply(this, arguments)\r\n    })\r\n  }\r\n\r\n  _named(options.name, Extended)\r\n\r\n  defProp(Extended, 'prototype', { value: {} })\r\n  defProp(Extended.prototype, 'constructor', { value: Child })\r\n  defProp(Extended.prototype, PROTOTYPE_IS_EXTENDED_PROP, { value: true })\r\n\r\n  options.super.forEach(Super => {\n    function Proto() {}\r\n    Proto.prototype = Super.prototype\r\n\r\n    const proto = new Proto()\r\n\r\n    for(let prop in proto)\r\n      if(['constructor', PROTOTYPE_IS_EXTENDED_PROP, SUPER_CHAIN_PROTO_PROP, SUPER_CHAIN_APPLY_PROP].indexOf(prop) < 0)\r\n        defProp(Extended.prototype, prop, {\r\n          value: proto[prop],\r\n          enumerable: true,\r\n          writable: true\r\n        })\r\n  })\r\n\r\n  _copyChain(Extended, options.super, SUPER_CHAIN_PROTO_PROP, false)\r\n  _copyChain(Extended, options.apply, SUPER_CHAIN_APPLY_PROP, true)\r\n\r\n  return Extended\r\n}\r\n\r\nconst extend = (...args) => _extend({ super: args, apply: args })\r\n\r\nexport { extend, _extend, _copyChain }\r\n","import Proto from './proto'\r\nimport { toBuffer } from './utils/to'\r\n\r\nfunction copy(target) {\r\n\tconst targetStart \t= arguments[1] !== undefined ? arguments[1] : 0,\r\n\t\t\t\tsourceStart \t= arguments[2] !== undefined ? arguments[2] : 0,\r\n\t\t\t\tsourceEnd \t\t= arguments[3] !== undefined ? arguments[3] : source.length\r\n\r\n\tlet copied = 0\r\n\r\n\tfor(let sourceIndex = sourceStart, targetIndex = targetStart; sourceIndex < sourceEnd; sourceIndex++, targetIndex++, copied++)\r\n\t\ttarget.set([ this[sourceIndex] ], targetIndex)\r\n\r\n\treturn copied\r\n}\r\n\r\nfunction Buffer() {\r\n\tthrow new Error('Buffer constructor is deprecated. Use Buffer.from() instead.')\r\n}\r\n\r\nBuffer.from = function _createBuffer() {\r\n\t//console.log(arguments)\r\n\tlet iterable = []\r\n\tif(typeof arguments[0] === 'string') {\r\n    for(let c in arguments[0])\r\n  \t\titerable[c] = arguments[0].charCodeAt(c)\r\n\r\n  \titerable = new Proto(iterable)\r\n  }\r\n\r\n  else if(arguments[0] instanceof Proto || arguments[0] instanceof Array)\r\n\t\titerable = new Proto(arguments[0])\r\n\r\n\tconst offset = arguments[1] !== undefined ? arguments[1] : 0,\r\n\t\tlength = arguments[2] !== undefined ? arguments[2] : iterable.length\r\n\r\n\tconst array = []\r\n\r\n\tfor(let i = offset;i--;)\r\n\t\tarray[i] = 0\r\n\r\n\tfor(let i = 0; (i < iterable.length) && (i < length); i++)\r\n\t\tarray[offset + i] = iterable[i]\r\n\r\n\tfor(let i = array.length; i < length; i++)\r\n\t\tarray[i] = 0\r\n\r\n\tconst buffer = new Proto(array)\r\n\r\n\treturn buffer\r\n}\r\n\r\nBuffer.concat = function concat() {\r\n\tconst list = arguments[0] || [],\r\n\t\ttotalLength = arguments[1] !== undefined ? arguments[1] : list.reduce((totalLength, array) => (totalLength + array.length), 0)\r\n\r\n\tlet buffer = Buffer.from([], 0, totalLength),\n\t\toffset = 0\r\n\r\n\tlist.forEach(buf => {\r\n\t\tbuffer.set(buf, offset)\r\n\t\toffset += buf.length\r\n\t})\r\n\r\n\treturn buffer\r\n}\r\n\r\nexport default Buffer\r\n","function EventEmitter() { }\r\n\r\n_named('EventEmitter', EventEmitter)\r\n\r\nEventEmitter.prototype.on = function on() {\r\n  Object.prototype.on.apply(this, arguments)\r\n\r\n  return this\r\n}\r\n\r\nEventEmitter.prototype.once = function once(event, listener) {\r\n  function _listener() {\r\n    this.removeListener(event, _listener)\r\n    return listener.apply(this, arguments)\r\n  }\r\n\r\n  return this.on(event, _listener)\r\n}\r\n\r\nexport default EventEmitter\r\n","import EventEmitter from 'events'\r\n\r\nfunction _Stream(options = {}) {\r\n\tthis.options = {\r\n\t\thighWaterMark: options.highWaterMark || 128\r\n\t}\r\n}\r\n\r\n_named('Stream', _Stream)\r\n\r\nconst Stream = _extend({\r\n\tname: 'Stream',\r\n\tsuper: [EventEmitter],\r\n\tapply: [EventEmitter, _Stream]\r\n})\r\n\r\nexport default Stream\r\n","import Stream from './stream'\r\n\r\nconst ENCODINGS = {\r\n\tBINARY: 'binary',\r\n\tUTF8: 'utf8'\r\n}\r\n\r\nfunction _readFree() {\r\n\t//console.log('_readFree()')\r\n\treturn this._read(this._readableState.highWaterMark - this._readableState.length)\r\n}\r\n\r\nfunction _readFromInternalBuffer(length = this.options.highWaterMark) {\r\n\tconst buffer = []\n\n\tif(this._readableState.length > 0 && length > 0) {\n\t\tlet red = 0\n\t\twhile(this._readableState.length > 0 && red < length) {\n\t\t\tconst data = this._readableState.buffer[0]\n\t\t\tif(red + data.chunk.length <= length) {\n\t\t\t\tthis._readableState.buffer.shift()\r\n\t\t\t\tthis._readableState.length -= data.chunk.length\n\t\t\t\tred += length\n\t\t\t\tbuffer.push(data)\n\t\t\t}\n\t\t\telse\n\t\t\t\tbreak\n\t\t}\n\t}\r\n\r\n\treturn buffer\r\n}\r\n\r\nfunction toString(binary) {\r\n\tlet str = ''\r\n\tfor(let i = 0; i < binary.length; i++)\r\n\t\tstr += String.fromCharCode(binary[i])\r\n\treturn str\r\n}\r\n\r\nfunction _broadcast() {\r\n\t//console.log('_broadcast()')\r\n\tconst buffer = _readFromInternalBuffer.call(this)\r\n\tif(buffer.length > 0) {\r\n\t\tprocess.nextTick(() => {\n\t\t\t//console.log('buffer', buffer)\n\t\t\tbuffer.forEach(data => {\r\n\t\t\t\tthis.emit('data', data.chunk, data.encoding)\r\n\t\t\t})\n\t\t})\r\n\t}\r\n}\r\n\r\nfunction _flow() {\r\n\t//console.log('_flow()', this._readableState.flowing)\r\n\tif(this._readableState.flowing) {\r\n\t\t_broadcast.call(this)\r\n\t\tprocess.nextTick(() => _readFree.call(this))\r\n\t}\r\n}\r\n\r\nfunction _end() {\r\n\tthis._readableState.flowing = null\r\n\tthis._readableState.ended = true\r\n\r\n}\r\n\r\nfunction _Readable(options = {}) {\r\n\tthis._readableState = {\r\n\t\tbuffer: [],//Buffer.from([]),\r\n\t\tlength: 0,\r\n\t\tflowing: null,\r\n\t\tended: false,\r\n\t\tdefaultEncoding: ENCODINGS.UTF8\r\n\t}\r\n\r\n\tthis.pipes = []\r\n\r\n\tthis._read = options.read.bind(this)\r\n\r\n\tif(!this._read)\r\n\t\tthrow new TypeError('_read() is not implemented')\r\n\tif(!this._read instanceof Function)\r\n\t\tthrow new TypeError('\\'options.read\\' should be a function, passed', typeof options.read)\r\n}\r\n_named('Readable', _Readable)\r\n\r\nconst Readable = _extend({\r\n\tname: 'Readable',\r\n\tsuper: [Stream],\r\n\tapply: [Stream, _Readable]\r\n})\r\n\r\nReadable.prototype.pause = function pause() {\r\n\t//console.log('pause()')\r\n\tif(this._readableState.flowing !== false) {\r\n\t\tthis._readableState.flowing = false\r\n\t\tthis.emit('pause')\r\n\t}\r\n\r\n\treturn this\r\n}\r\n\r\nReadable.prototype.resume = function resume() {\r\n\t//console.log('resume()')\r\n\tif(!this._readableState.flowing) {\r\n\t\tthis._readableState.flowing = true\r\n\t\tthis.emit('resume')\r\n\t\t_flow.call(this)\r\n\t}\r\n\r\n\t//_broadcast.call(this)\r\n\r\n\treturn this\r\n}\r\n\r\nReadable.prototype.read = function read(length = this.options.highWaterMark) {\r\n\treturn _readFromInternalBuffer.call(this, length)\r\n}\r\n\r\nReadable.prototype.push = function push(chunk) {\r\n\t//console.log('push(' + chunk + ')')\r\n\tif(chunk === null) {\r\n\t\t_end.call(this)\r\n\t\treturn false\r\n\t}\r\n\r\n\tconst data = {\r\n\t\tchunk: Buffer.from(chunk),\r\n\t\tnext: null\r\n\t}\r\n\r\n\tif(this._readableState.buffer.length)\r\n    this._readableState.buffer[this._readableState.buffer.length - 1].next = data\r\n  this._readableState.buffer.push(data)\r\n  this._readableState.length += data.chunk.length\r\n\r\n\tconst overflow = this._readableState.length > this.options.highWaterMark\r\n\r\n\tif(!overflow)\r\n\t\t_flow.call(this)\r\n\r\n\treturn !overflow\r\n}\r\n\r\nReadable.prototype.pipe = function pipe(writable) {\r\n\tif(!this.pipes.some(pipe => (pipe.writable === writable))) {\r\n\t\tconst listener = (data, pipe) => {\r\n\t\t\tif(!writable.write(data)) {\r\n\t\t\t\t//console.log('pipe should be stopped!')\r\n\t\t\t\tpipe.stopped = true\r\n\t\t\t\tthis.pause()\r\n\r\n\t\t\t\twritable.once('drain', () => this.resume())\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst pipe = { writable, listener, stopped: undefined }\r\n\r\n\t\tthis\r\n\t\t\t.on('data', data => listener(data, pipe))\r\n\t\t\t.pipes.push(pipe)\r\n\t}\r\n\r\n\treturn writable\r\n}\r\n\r\nReadable.prototype.unpipe = function unpipe(writable) {\r\n  if(writable) {\r\n    const pipe = this.pipes.find(pipe => ( pipe.writable === writable ))\r\n\r\n    if(pipe)\r\n      this.removeListener('data', pipe.listener)\r\n  }\r\n\r\n  else {\r\n    for(let { listener } of this.pipes)\r\n      this.removeListener(listener)\r\n    this.pipes.splice(0, this.pipes.length)\r\n  }\r\n}\r\n\r\nReadable.prototype.on = function on(event, listener) {\r\n\tif(event === 'data')\r\n\t\tthis.resume()\r\n\r\n\treturn Stream.prototype.on.apply(this, arguments)\r\n}\r\n\r\nReadable.prototype.removeListener = function removeListener(event, listener) {\r\n\tif(event === 'data') {\r\n\t\t//!!! this._listeners should be implemented\r\n\t\t//console.log(this.listeners)\r\n\t\tthis.pause()\r\n\t}\r\n\r\n\treturn Stream.prototype.removeListener.apply(this, arguments)\r\n}\r\n\r\nReadable.prototype.isPaused = function isPaused() {\r\n\treturn !this._readableState.flowing\r\n}\r\n\r\nexport default Readable\r\n","import Stream from './stream'\r\n\r\nfunction _readFromInternalBuffer(...args) {\r\n  const spliced = this._writableState.buffer.splice(...args)\r\n  this._writableState.length -= spliced.reduce((length, data) => (length += data.chunk.length), 0)\r\n\r\n  if(this._writableState.needDrain && (this._writableState.length < this.options.highWaterMark)) {\r\n    this._writableState.needDrain = false\r\n    this.emit('drain')\r\n  }\r\n\r\n  return spliced\r\n}\r\n\r\nfunction _writeToInternalBuffer(chunk, encoding) {\r\n  const data = {\r\n    chunk: Buffer.from(chunk),\r\n    encoding: 'binary',\r\n    next: null\r\n  }\r\n\r\n  if(this._writableState.buffer.length)\r\n    this._writableState.buffer[this._writableState.buffer.length - 1].next = data\r\n  this._writableState.buffer.push(data)\r\n  this._writableState.length += data.chunk.length\r\n\r\n  return this._writableState.buffer\r\n}\r\n\r\nfunction write(chunk/*, encoding*/) {\r\n  //console.log('write(' + chunk + ')')\r\n  _writeToInternalBuffer.apply(this, arguments)\r\n\r\n  ;(function _consume() {\r\n    if(!this._writableState.buffer.length)\r\n      return\r\n\r\n    const cb = err => {\r\n      if(err)\r\n        throw err\r\n\r\n      process.nextTick(() => {\r\n        this._writableState.consumed = true\r\n\r\n        if(this._writableState.buffer.length > 0)\r\n          _consume()\r\n      })\r\n    }\r\n\r\n    if(!this._writableState.corked && this._writableState.consumed) {\r\n      this._writableState.consumed = false\r\n\r\n      if(this._writev && this._writableState.buffer.length > 1) {\r\n        const toConsume = _readFromInternalBuffer\r\n          .call(this, 0, this._writableState.buffer.length)\r\n          .map(d => ({ chunk: d.chunk, encoding: d.encoding}))\r\n\r\n        this._writev(toConsume, cb)\r\n      }\r\n      else {\r\n        const toConsume = _readFromInternalBuffer.call(this, 0, 1).shift()\r\n\r\n        this._write(toConsume.chunk, toConsume.encoding, cb)\r\n      }\r\n    }\r\n  }).call(this)\r\n\r\n  return this._writableState.length < this.options.highWaterMark\r\n}\r\n\r\nfunction _Writable(options = {}) {\r\n\tthis._write = options.write.bind(this)\r\n\r\n  this._writableState = {\r\n    buffer: [],\r\n    length: 0,\r\n    getBuffer: () => this._writableState.buffer,\r\n\r\n    corked: 0,\r\n    consumed: true,\r\n    needDrain: false,\r\n    defaultEncoding: 'utf8',\r\n    decodeStrings: true\r\n  }\r\n}\r\n\r\n_named('Writable', _Writable)\r\n\r\nconst Writable = _extend({\r\n\tname: 'Writable',\r\n  super: [Stream],\r\n  apply: [Stream, _Writable]\r\n})\r\n\r\nWritable.prototype.write = write\r\n\r\nexport default Writable\r\n","import Readable from './readable'\r\nimport Writable from './writable'\r\n\r\nfunction _Duplex(options = {}) {}\r\n_named('Duplex', _Duplex)\r\n\r\nconst Duplex = _extend({\r\n\tname: 'Duplex',\r\n  super: [Readable, Writable],\r\n  apply: [Readable, Writable, _Duplex]\r\n})\r\n\r\nDuplex.prototype.on = function on() {\r\n  Readable.prototype.on.apply(this, arguments)\r\n  //Writable.prototype.on.apply(this, arguments)\r\n\r\n  return this\r\n}\r\n\r\nexport default Duplex\r\n","import Readable from './readable'\r\nimport Writable from './writable'\r\n\r\nfunction _Duplex(options = {}) {}\r\n_named('Duplex', _Duplex)\r\n\r\nconst Duplex = _extend({\r\n\tname: 'Duplex',\r\n  super: [Readable, Writable],\r\n  apply: [Readable, Writable, _Duplex]\r\n})\r\n\r\nDuplex.prototype.on = function on() {\r\n  Readable.prototype.on.apply(this, arguments)\r\n  //Writable.prototype.on.apply(this, arguments)\r\n\r\n  return this\r\n}\r\n\r\nexport default Duplex\r\n","import Duplex from './Duplex'\r\n\r\nfunction _read(size) {\r\n  //console.log('_read()')\r\n  //dumb function\r\n}\r\n\r\nfunction _write(data, encoding, cb) {\r\n  //console.log('_write(' + data + ')')\r\n  return this._transform(data, encoding, cb)\r\n}\r\n\r\nfunction _Transform(options = {}) {\r\n  Duplex.call(this, {\r\n    read: _read,\r\n    write: _write,\r\n    highWaterMark: options.highWaterMark\r\n  })\r\n\r\n  this._transform = options.transform.bind(this)\r\n}\r\n\r\nconst Transform = _extend({\r\n\tname: 'Transform',\r\n  super: [Duplex],\r\n  apply: [_Transform]\r\n})\r\n\r\nexport default Transform\r\n","import Transform from './transform'\r\n\r\nfunction _transform(data, encoding, cb) {\r\n  this.push(data, encoding)\r\n  cb()\r\n}\r\n\r\nfunction _PassThrough(options = {}) {\r\n  Transform.call(this, {\n    highWaterMark: options.highWaterMark,\n    transform: _transform\n  })\r\n}\r\n\r\nconst PassThrough = _extend({\r\n  super: [Transform],\r\n  apply: [_PassThrough]\r\n})\r\n\r\nexport default PassThrough\r\n","import EventEmitter from 'events'\r\n\r\nfunction _Schedule() {\r\n  this._edge = Promise.resolve()\r\n  this.slots = {}\r\n}\r\n\r\nconst Schedule = _extend({\r\n  name: 'Schedule',\r\n  super: [EventEmitter],\r\n  apply: [EventEmitter, _Schedule]\r\n})\r\n\r\nSchedule.prototype.immediate = function (task) {\r\n  this._edge = Promise.all([\r\n    this._edge,\r\n    Promise.resolve(task(this.slots)).catch(err => this.emit('error', err))\r\n  ])\r\n\r\n  return this\r\n}\r\n\r\nSchedule.prototype.deferred = function (task) {\r\n  this._edge = this._edge.then(r => task(this.slots)).catch(err => this.emit('error', err))\r\n\r\n  return this\r\n}\r\n\r\nexport default Schedule\r\n","import { Duplex } from 'stream'\r\nimport Schedule from 'schedule'\r\nimport EventEmitter from 'events'\r\n\r\nfunction _read(size) {\r\n\r\n}\r\n\r\nfunction _write(data, encoding, cb) {\r\n  this.slots.incoming.emit('data', { chunk: data, encoding })\r\n\r\n  cb()\r\n}\r\n\r\nfunction _Bus(options = {}) {\r\n  Duplex.call(this, {\r\n    read: _read,\r\n    write: _write,\r\n    highWaterMark: options.highWaterMark\r\n  })\r\n\r\n  this._setup = options.setup.bind(this)\r\n\r\n  this.slots.incoming = new EventEmitter()\r\n\r\n  this._busState = {\r\n    configured: false,\r\n    parsing: Buffer.from([]),\r\n    //parsedFrames: []\r\n  }\r\n}\r\n\r\nconst Bus = _extend({\r\n  name: 'Bus',\r\n  super: [Duplex, Schedule],\r\n  apply: [Schedule, _Bus]\r\n})\r\n\r\nBus.prototype.setup = function(...args) {\r\n  return this.deferred(slots => {\r\n    if(this._busState.configured)\r\n      return Promise.reject('already configured')\r\n\r\n    this._busState.configured = true\r\n    return this._setup(slots, ...args)\r\n  })\r\n}\r\n\r\nexport default Bus\r\n","const CONSTANTS = {\r\n  PN532_PREAMBLE                      : 0x00,\r\n  PN532_STARTCODE1                    : 0x00,\r\n  PN532_STARTCODE2                    : 0xFF,\r\n  PN532_POSTAMBLE                     : 0x00,\r\n\r\n  PN532_HOSTTOPN532                   : 0xD4,\r\n\r\n  // PN532 Commands\r\n  PN532_COMMAND_DIAGNOSE              : 0x00,\r\n  PN532_COMMAND_GETFIRMWAREVERSION    : 0x02,\r\n  PN532_COMMAND_GETGENERALSTATUS      : 0x04,\r\n  PN532_COMMAND_READREGISTER          : 0x06,\r\n  PN532_COMMAND_WRITEREGISTER         : 0x08,\r\n  PN532_COMMAND_READGPIO              : 0x0C,\r\n  PN532_COMMAND_WRITEGPIO             : 0x0E,\r\n  PN532_COMMAND_SETSERIALBAUDRATE     : 0x10,\r\n  PN532_COMMAND_SETPARAMETERS         : 0x12,\r\n  PN532_COMMAND_SAMCONFIGURATION      : 0x14,\r\n  PN532_COMMAND_POWERDOWN             : 0x16,\r\n  PN532_COMMAND_RFCONFIGURATION       : 0x32,\r\n  PN532_COMMAND_RFREGULATIONTEST      : 0x58,\r\n  PN532_COMMAND_INJUMPFORDEP          : 0x56,\r\n  PN532_COMMAND_INJUMPFORPSL          : 0x46,\r\n  PN532_COMMAND_INLISTPASSIVETARGET   : 0x4A,\r\n  PN532_COMMAND_INATR                 : 0x50,\r\n  PN532_COMMAND_INPSL                 : 0x4E,\r\n  PN532_COMMAND_INDATAEXCHANGE        : 0x40,\r\n  PN532_COMMAND_INCOMMUNICATETHRU     : 0x42,\r\n  PN532_COMMAND_INDESELECT            : 0x44,\r\n  PN532_COMMAND_INRELEASE             : 0x52,\r\n  PN532_COMMAND_INSELECT              : 0x54,\r\n  PN532_COMMAND_INAUTOPOLL            : 0x60,\r\n  PN532_COMMAND_TGINITASTARGET        : 0x8C,\r\n  PN532_COMMAND_TGSETGENERALBYTES     : 0x92,\r\n  PN532_COMMAND_TGGETDATA             : 0x86,\r\n  PN532_COMMAND_TGSETDATA             : 0x8E,\r\n  PN532_COMMAND_TGSETMETADATA         : 0x94,\r\n  PN532_COMMAND_TGGETINITIATORCOMMAND : 0x88,\r\n  PN532_COMMAND_TGRESPONSETOINITIATOR : 0x90,\r\n  PN532_COMMAND_TGGETTARGETSTATUS     : 0x8A,\r\n\r\n  PN532_WAKEUP                        : 0x55,\r\n\r\n  /*PN532_SPI_STATREAD                  : 0x02,\r\n  PN532_SPI_DATAWRITE                 : 0x01,\r\n  PN532_SPI_DATAREAD                  : 0x03,\r\n  PN532_SPI_READY                     : 0x01,\r\n\r\n  PN532_I2C_ADDRESS                   : 0x48 >> 1,\r\n  PN532_I2C_READBIT                   : 0x01,\r\n  PN532_I2C_BUSY                      : 0x00,\r\n  PN532_I2C_READY                     : 0x01,\r\n  PN532_I2C_READYTIMEOUT              : 20,\r\n\r\n  PN532_MIFARE_ISO14443A              : 0x00,\r\n\r\n  // Mifare Commands\r\n  MIFARE_CMD_AUTH_A                   : 0x60,\r\n  MIFARE_CMD_AUTH_B                   : 0x61,\r\n  MIFARE_CMD_READ                     : 0x30,\r\n  MIFARE_CMD_WRITE                    : 0xA0,\r\n  MIFARE_CMD_TRANSFER                 : 0xB0,\r\n  MIFARE_CMD_DECREMENT                : 0xC0,\r\n  MIFARE_CMD_INCREMENT                : 0xC1,\r\n  MIFARE_CMD_RESTORE                  : 0xC2,\r\n\r\n  // Prefixes for NDEF Records : to identify record type,\r\n  NDEF_URIPREFIX_NONE                 : 0x00,\r\n  NDEF_URIPREFIX_HTTP_WWWDOT          : 0x01,\r\n  NDEF_URIPREFIX_HTTPS_WWWDOT         : 0x02,\r\n  NDEF_URIPREFIX_HTTP                 : 0x03,\r\n  NDEF_URIPREFIX_HTTPS                : 0x04,\r\n  NDEF_URIPREFIX_TEL                  : 0x05,\r\n  NDEF_URIPREFIX_MAILTO               : 0x06,\r\n  NDEF_URIPREFIX_FTP_ANONAT           : 0x07,\r\n  NDEF_URIPREFIX_FTP_FTPDOT           : 0x08,\r\n  NDEF_URIPREFIX_FTPS                 : 0x09,\r\n  NDEF_URIPREFIX_SFTP                 : 0x0A,\r\n  NDEF_URIPREFIX_SMB                  : 0x0B,\r\n  NDEF_URIPREFIX_NFS                  : 0x0C,\r\n  NDEF_URIPREFIX_FTP                  : 0x0D,\r\n  NDEF_URIPREFIX_DAV                  : 0x0E,\r\n  NDEF_URIPREFIX_NEWS                 : 0x0F,\r\n  NDEF_URIPREFIX_TELNET               : 0x10,\r\n  NDEF_URIPREFIX_IMAP                 : 0x11,\r\n  NDEF_URIPREFIX_RTSP                 : 0x12,\r\n  NDEF_URIPREFIX_URN                  : 0x13,\r\n  NDEF_URIPREFIX_POP                  : 0x14,\r\n  NDEF_URIPREFIX_SIP                  : 0x15,\r\n  NDEF_URIPREFIX_SIPS                 : 0x16,\r\n  NDEF_URIPREFIX_TFTP                 : 0x17,\r\n  NDEF_URIPREFIX_BTSPP                : 0x18,\r\n  NDEF_URIPREFIX_BTL2CAP              : 0x19,\r\n  NDEF_URIPREFIX_BTGOEP               : 0x1A,\r\n  NDEF_URIPREFIX_TCPOBEX              : 0x1B,\r\n  NDEF_URIPREFIX_IRDAOBEX             : 0x1C,\r\n  NDEF_URIPREFIX_FILE                 : 0x1D,\r\n  NDEF_URIPREFIX_URN_EPC_ID           : 0x1E,\r\n  NDEF_URIPREFIX_URN_EPC_TAG          : 0x1F,\r\n  NDEF_URIPREFIX_URN_EPC_PAT          : 0x20,\r\n  NDEF_URIPREFIX_URN_EPC_RAW          : 0x21,\r\n  NDEF_URIPREFIX_URN_EPC              : 0x22,\r\n  NDEF_URIPREFIX_URN_NFC              : 0x23,\r\n\r\n  PN532_GPIO_VALIDATIONBIT            : 0x80,\r\n  PN532_GPIO_P30                      : 0,\r\n  PN532_GPIO_P31                      : 1,\r\n  PN532_GPIO_P32                      : 2,\r\n  PN532_GPIO_P33                      : 3,\r\n  PN532_GPIO_P34                      : 4,\r\n  PN532_GPIO_P35                      : 5,*/\r\n\r\n  PN532_SAM_NORMAL_MODE               : 0x01,\r\n  PN532_SAM_VIRTUAL_CARD              : 0x02,\r\n  PN532_SAM_WIRED_CARD                : 0x03,\r\n  PN532_SAM_DUAL_CARD                 : 0x04,\r\n\r\n  PN532_BRTY_ISO14443A               : 0x00,\r\n  PN532_BRTY_ISO14443B               : 0x03,\r\n  PN532_BRTY_212KBPS                 : 0x01,\r\n  PN532_BRTY_424KBPS                 : 0x02,\r\n  PN532_BRTY_JEWEL                   : 0x04,\r\n  NFC_WAIT_TIME                      : 30,\r\n  NFC_CMD_BUF_LEN                    : 64,\r\n  NFC_FRAME_ID_INDEX                 : 6\r\n}\r\n\r\nconst cmd = function(c, readBytes) {\r\n  var i,arr = [CONSTANTS.PN532_PREAMBLE,CONSTANTS.PN532_STARTCODE1,CONSTANTS.PN532_STARTCODE2,\r\n     c.length+1,(~c.length)&0xFF, CONSTANTS.PN532_HOSTTOPN532]\r\n  for (i in c) arr.push(c[i])\r\n  var checksum = -arr[0]\r\n  for (i in arr)\r\n    checksum+=arr[i]\r\n  arr.push((~checksum) & 0xFF)\r\n  checksum=0\r\n  for (i in arr)\r\n    checksum+=arr[i]\r\n  arr.push(CONSTANTS.PN532_POSTAMBLE)\r\n  return new Uint8Array(arr)\r\n}\r\n\r\nexport { CONSTANTS, cmd }\r\n","import Bus from 'bus'\r\nimport EventEmitter from 'events'\r\nimport { CONSTANTS, cmd } from '../lib/nfc'\r\n\r\n\r\n\r\nconst wakeup = new Uint8Array([0x55, 0x55, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00])\r\nconst c = cmd([CONSTANTS.PN532_COMMAND_GETGENERALSTATUS])\r\nconst sam = cmd([CONSTANTS.PN532_COMMAND_SAMCONFIGURATION, CONSTANTS.PN532_SAM_NORMAL_MODE,20, 0])\r\n\r\n//blink()\r\n\r\nfunction setup(slots, serial) {\r\n  console.log('setup()')\r\n\r\n  slots.serial = serial\r\n\r\n  serial.setup(115200, {\r\n    rx: B7, tx: B6\r\n  })\r\n\r\n  serial.pipe(this)\r\n\r\n  serial.write(wakeup)\r\n  serial.write(sam)\r\n\r\n  return new Promise(resolve => {\r\n    setTimeout(() => {\r\n      blink.once(LED1, 20, () => setTimeout(() => blink.once(LED1, 20), 200))\r\n\r\n      console.log('configured')\r\n\r\n      resolve()\r\n    }, 2000)\r\n  })\r\n}\r\n\r\nconst bus = new Bus({ setup })\r\n\r\nbus.on('frame', frame => console.log(process.memory().free, frame))\r\n\r\nbus.on('error', err => console.log(err))\r\n\r\nbus.setup(Serial1)\r\n\r\nbus.deferred(({ serial }) => setInterval(() => serial.write(c), 2000))\r\n\r\nbus.deferred(slots => {\r\n  slots.incoming.on('data', data => {\r\n    blink.once(LED2)\r\n    //console.log('incoming', data.chunk)\r\n  })\r\n})\r\n"],"names":["pushImmediate","queue","i","length","splice","pushToNextIteration","_queue","loop","handle","timer","asyncCall","cb","asyncFlush","defer","stage","push","_setTimeout","timeout","setTimeout","status","blink","mode","undefined","stop","start","once","LED2","led","on","write","_nextTick","nextTick","bind","this","_process","process","_setImmediate","immediate","PENDING","SEALED","FULFILLED","REJECTED","NOOP","invokeResolver","resolver","promise","resolvePromise","value","rejectPromise","reason","e","invokeCallback","subscriber","owner","settled","state_","data_","callback","then","handleThenable","resolve","reject","resolved","TypeError","call","val","fulfill","publishFulfillment","publishRejection","publish","callbacks","then_","Promise","prototype","onFulfillment","onRejection","constructor","all","promises","Class","Array","results","remaining","index","race","defProp","obj","prop","desc","defineProperty","get","name","f","SUPER_CHAIN_PROTO_PROP","SUPER_CHAIN_APPLY_PROP","PROTOTYPE_IS_EXTENDED_PROP","_copyChain","Extended","ProtoChain","chainPropName","ignoreExtended","forEach","isExtended","Proto","hasSameChain","alreadyInChain","some","P","shouldBePushed","shouldCopyChain","_extend","options","apply","super","Child","Super","proto","indexOf","Buffer","Error","from","_createBuffer","iterable","arguments","c","charCodeAt","offset","array","buffer","concat","list","totalLength","reduce","set","buf","EventEmitter","_named","event","listener","_listener","removeListener","_Stream","highWaterMark","Stream","ENCODINGS","_readFree","_read","_readableState","_readFromInternalBuffer","red","data","chunk","shift","_broadcast","emit","encoding","_flow","flowing","_end","ended","_Readable","UTF8","pipes","read","Function","Readable","pause","resume","next","overflow","pipe","writable","stopped","unpipe","find","isPaused","spliced","_writableState","needDrain","_writeToInternalBuffer","_consume","err","consumed","corked","_writev","toConsume","map","d","_write","_Writable","Writable","_Duplex","Duplex","size","_transform","_Transform","transform","Transform","_PassThrough","PassThrough","_Schedule","_edge","slots","Schedule","task","catch","deferred","incoming","_Bus","_setup","setup","_busState","Bus","args","configured","CONSTANTS","cmd","readBytes","arr","PN532_PREAMBLE","PN532_STARTCODE1","PN532_STARTCODE2","PN532_HOSTTOPN532","checksum","PN532_POSTAMBLE","Uint8Array","wakeup","PN532_COMMAND_GETGENERALSTATUS","sam","PN532_COMMAND_SAMCONFIGURATION","PN532_SAM_NORMAL_MODE","serial","log","B7","tx","B6","LED1","bus","console","memory","free","frame","Serial1","setInterval"],"mappings":"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"}